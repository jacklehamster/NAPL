{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@dobuki/app-template/./node_modules/dok-file-utils/src/file-utils.js","webpack://@dobuki/app-template/./node_modules/dok-file-utils/src/image-loader.js","webpack://@dobuki/app-template/./node_modules/dok-file-utils/src/index.js","webpack://@dobuki/app-template/webpack/bootstrap","webpack://@dobuki/app-template/./src/engine/auxiliary-loader.ts","webpack://@dobuki/app-template/./src/engine/engine.ts","webpack://@dobuki/app-template/./src/index.ts"],"sourcesContent":["class FileUtils {\n    constructor(XMLHttpRequest) {\n        this.XMLHttpRequest = XMLHttpRequest || globalThis.XMLHttpRequest;\n        this.fileStock = {};\n    }\n\n    async preload(...urls) {\n        return Promise.all(urls.map(async url => {\n            return await this.load(url);\n        }));\n    }\n\n    async load(url, responseType) {\n        return !url ? Promise.resolve(null) : new Promise((resolve, reject) => {\n            const realResponseType = responseType || (url.match(/.(json)$/i) ? \"json\" : 'blob');\n            const tag = [url, realResponseType].join(\"|\");\n            if (this.fileStock[tag]) {\n                const { data, loaded, onLoadListeners } = this.fileStock[tag];\n                if (!loaded) {\n                    onLoadListeners.push(resolve);\n                } else {\n                    resolve(data);\n                }\n            } else {\n                const req = new this.XMLHttpRequest();\n                this.fileStock[tag] = {\n                    data: null,\n                    url,\n                    progress: 0,\n                    onLoadListeners: [],\n                };\n                req.open('GET', url);\n                req.responseType = realResponseType;\n\n                req.addEventListener('load', e => {\n                    if (req.status === 200) {\n                        const data = req.response;\n                        this.fileStock[tag].progress = 1;\n                        this.fileStock[tag].loaded = true;\n                        this.fileStock[tag].data = data;\n                        this.fileStock[tag].onLoadListeners.forEach(callback => callback(data));\n                        delete this.fileStock[tag].onLoadListeners;\n                        resolve(data);\n                    }\n                    else {\n                        reject(new Error(`Url could not load: ${url}`));\n                    }\n                });\n                req.addEventListener('error', e => {\n                    reject(new Error(\"Network Error\"));\n                });\n                req.addEventListener('progress', e => {\n                    this.fileStock[tag].progress = e.loaded / e.total;\n                });\n                req.send();\n            }\n        });\n    }\n}\n\nif (typeof module !== \"undefined\") {\n    module.exports = {\n        FileUtils,\n    };\n}\n","class ImageLoader {\n\tconstructor(preserve, XMLHttpRequest, Image) {\n\t\tthis.preserve = preserve || {};\n\t\tthis.XMLHttpRequest = XMLHttpRequest || globalThis.XMLHttpRequest;\n\t\tthis.Image = Image || globalThis.Image;\n\t\tthis.imageStock = {};\n\t}\n\n\tasync getBlobUrl(url) {\n\t\tawait this.loadImage(url);\n\t\treturn this.preserve[url] ? this.imageStock[url]?.img.src : null; \n\t}\n\n\tasync preloadImages(...urls) {\n\t\treturn Promise.all(urls.map(async url => {\n\t\t\treturn await this.loadImage(url);\n\t\t}));\n\t}\n\n\tasync loadImage(url) {\n\t\treturn !url ? Promise.resolve(null) : new Promise((resolve, reject) => {\n\t\t\tif (this.imageStock[url]) {\n\t\t\t\tconst { img, loaded, onLoadListeners } = this.imageStock[url];\n\t\t\t\tif (!loaded) {\n\t\t\t\t\tonLoadListeners.push(resolve);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(img);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t    const req = new this.XMLHttpRequest();\n\t\t\t    const img = new this.Image();\n\t\t\t    this.imageStock[url] = {\n\t\t\t    \timg,\n\t\t\t    \turl,\n\t\t\t    \tprogress: 0,\n\t\t\t    \tonLoadListeners: [],\n\t\t\t    };\n\t\t\t    req.open('GET', url);\n\t\t        req.responseType = 'blob';\n\n\t\t\t    req.addEventListener('load', e => {\n\t\t\t    \tif (req.status === 200) {\n\t\t\t\t\t\tif (url.match(/.(jpg|jpeg|png|gif)$/i)) {\n\t\t\t\t\t\t\tconst imageURL = URL.createObjectURL(req.response);\n\t\t\t\t\t\t\tconst { img } = this.imageStock[url];\n\t\t\t\t\t\t\timg.addEventListener(\"load\", () => {\n\t\t\t\t\t\t\t\tif (!this.preserve[url]) {\n\t\t\t\t\t\t\t\t\tURL.revokeObjectURL(imageURL);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.imageStock[url].progress = 1;\n\t\t\t\t\t\t\t\tthis.imageStock[url].loaded = true;\n\t\t\t\t\t\t\t\tconst listeners = this.imageStock[url].onLoadListeners;\n\t\t\t\t\t\t\t\tdelete this.imageStock[url].onLoadListeners;\n\t\t\t\t\t\t\t\tresolve(img);\n\t\t\t\t\t\t\t\tlisteners.forEach(callback => callback(img));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\timg.src = imageURL;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(new Error(\"Invalid image.\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treject(new Error(`Url could not load: ${url}`));\n\t\t\t\t\t}\n\t\t\t    });\n\t\t\t    req.addEventListener('error', e => {\n\t\t\t    \treject(new Error(\"Network Error\"));\n\t\t\t    });\n\t\t\t    req.addEventListener('progress', e => {\n\t\t\t    \tthis.imageStock[url].progress = e.loaded / e.total;\n\t\t\t    });\n\t\t\t\treq.send();\n\t\t\t}\n\t\t});\n\t}\n}\n\nif (typeof module !== \"undefined\") {\n\tmodule.exports = {\n    \tImageLoader,\n\t};\n}\n","const { FileUtils } = require(\"./file-utils\");\nconst { ImageLoader } = require(\"./image-loader\");\n\nmodule.exports = {\n    FileUtils,\n    ImageLoader,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/** AUX START: [import $className from \"../../napl/auxiliaries/$className.json\"] **/\nimport ActiveFromList from \"../../napl/auxiliaries/ActiveFromList.json\";\nimport Dialog from \"../../napl/auxiliaries/Dialog.json\";\nimport Reference from \"../../napl/auxiliaries/Reference.json\";\nimport Scene from \"../../napl/auxiliaries/Scene.json\";\nimport Workspace from \"../../napl/auxiliaries/Workspace.json\";\n/** AUX END **/\nconst Auxiliaries = {\n    /** AUX START: [    $className,] **/\n    ActiveFromList,\n    Dialog,\n    Reference,\n    Scene,\n    Workspace,\n    /** AUX END **/\n};\nexport default Auxiliaries;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FileUtils } from 'dok-file-utils';\nimport Auxiliaries from './auxiliary-loader';\nexport default class Engine {\n    constructor(fileUtils) {\n        this.pathSplit = [];\n        this.fileUtils = fileUtils !== null && fileUtils !== void 0 ? fileUtils : new FileUtils(XMLHttpRequest);\n    }\n    load(url = 'sample/sample.json') {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.fileUtils.load(url, 'json');\n        });\n    }\n    getPrimaryAuxiliaries(holder) {\n        return Object.keys(holder).filter(key => key.match(/^[A-Z]\\w*$/)).sort();\n    }\n    getSecondaryAuxiliaries(holder) {\n        var _a;\n        return holder ? Object.keys((_a = holder.aux) !== null && _a !== void 0 ? _a : {}).sort() : [];\n    }\n    process(entity) {\n        this.getPrimaryAuxiliaries(entity).forEach(key => {\n            this.processAuxiliary(entity, key, entity[key], Auxiliaries[key]);\n        });\n        this.getSecondaryAuxiliaries(entity).forEach(key => {\n            var _a;\n            this.processAuxiliary(entity, key, (_a = entity.aux) === null || _a === void 0 ? void 0 : _a[key], Auxiliaries[key]);\n        });\n    }\n    processAuxiliary(entity, auxname, config, processor) {\n        if (processor) {\n            this.executeProcessor(entity, processor);\n        }\n        console.log(\"-------\");\n        console.log(entity);\n        console.log(auxname);\n        console.log(config);\n        console.log(processor);\n        this.getSecondaryAuxiliaries(processor).forEach(key => {\n            var _a;\n            this.processAuxiliary(entity, key, (_a = processor === null || processor === void 0 ? void 0 : processor.aux) === null || _a === void 0 ? void 0 : _a[key], Auxiliaries[key]);\n        });\n    }\n    executeProcessor(entity, processor) {\n        var _a;\n        this.processMethods(entity, (_a = processor === null || processor === void 0 ? void 0 : processor.process) === null || _a === void 0 ? void 0 : _a.methods);\n    }\n    processMethods(entity, methods) {\n        methods === null || methods === void 0 ? void 0 : methods.forEach(method => {\n            entity[method.name] = this.generateExpressionFetcher(entity, method.return);\n        });\n    }\n    generateExpressionFetcher(entity, expression) {\n        if (!expression) {\n            return null;\n        }\n        if (typeof (expression) === 'object') {\n            const subject = this.generateExpressionFetcher(entity, expression === null || expression === void 0 ? void 0 : expression.subject);\n            const key = this.generateExpressionFetcher(entity, expression === null || expression === void 0 ? void 0 : expression.key);\n            const check = this.generateExpressionFetcher(entity, expression === null || expression === void 0 ? void 0 : expression.check);\n            return () => __awaiter(this, void 0, void 0, function* () {\n                const s = yield (subject === null || subject === void 0 ? void 0 : subject());\n                const k = key ? yield key() : null;\n                if (s && k) {\n                    console.log(\">>\", s, k);\n                    return entity[`${s}`][`${k}`];\n                }\n                return undefined;\n            });\n        }\n        else {\n            return () => __awaiter(this, void 0, void 0, function* () { return expression; });\n        }\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Auxiliaries from './engine/auxiliary-loader';\nimport Engine from './engine/engine';\nfunction start() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const div = document.createElement(\"div\");\n        div.style.position = \"absolute\";\n        div.style.top = \"0px\";\n        div.style.left = \"0px\";\n        div.style.backgroundColor = \"silver\";\n        div.style.width = \"100vw\";\n        div.style.padding = \"5px\";\n        div.style.margin = \"0px\";\n        div.style.opacity = \".8\";\n        div.style.cursor = \"pointer\";\n        div.style.whiteSpace = \"pre\";\n        div.style.fontFamily = \"monospace\";\n        div.addEventListener(\"mousedown\", () => document.body.removeChild(div));\n        console.log(Auxiliaries);\n        // div.innerText = JSON.stringify(Auxiliaries, null, \"  \");\n        document.body.appendChild(div);\n        const engine = new Engine();\n        const result = yield engine.load();\n        div.innerText = JSON.stringify(result, null, \"  \");\n        engine.process(result);\n        window.root = result;\n    });\n}\ndocument.addEventListener('DOMContentLoaded', start);\n"],"names":["module","exports","FileUtils","constructor","XMLHttpRequest","this","globalThis","fileStock","async","urls","Promise","all","map","load","url","responseType","resolve","reject","realResponseType","match","tag","join","data","loaded","onLoadListeners","push","req","progress","open","addEventListener","e","status","response","forEach","callback","Error","total","send","ImageLoader","preserve","Image","imageStock","loadImage","img","src","imageURL","URL","createObjectURL","revokeObjectURL","listeners","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","ActiveFromList","Dialog","Reference","Scene","Workspace","__awaiter","thisArg","_arguments","P","generator","fulfilled","value","step","next","rejected","result","done","then","apply","Engine","fileUtils","pathSplit","getPrimaryAuxiliaries","holder","Object","keys","filter","key","sort","getSecondaryAuxiliaries","_a","aux","process","entity","processAuxiliary","auxname","config","processor","executeProcessor","console","log","processMethods","methods","method","name","generateExpressionFetcher","return","expression","subject","check","s","k","document","div","createElement","style","position","top","left","backgroundColor","width","padding","margin","opacity","cursor","whiteSpace","fontFamily","body","removeChild","appendChild","engine","innerText","JSON","stringify","window","root"],"sourceRoot":""}