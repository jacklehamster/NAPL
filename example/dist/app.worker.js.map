{
  "version": 3,
  "sources": ["../../src/cycles/data-update/data-update.ts", "../../node_modules/@msgpack/msgpack/dist.esm/utils/utf8.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/ExtData.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/DecodeError.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/utils/int.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/timestamp.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/ExtensionCodec.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/utils/typedArrays.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/Encoder.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/encode.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/utils/prettyByte.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/CachedKeyDecoder.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/Decoder.mjs", "../../node_modules/@msgpack/msgpack/dist.esm/decode.mjs", "../../src/core/Processor.ts", "../../src/cycles/data-update/data-manager.ts", "../../src/observer/Observer.ts", "../../src/observer/ObserverManager.ts", "../../src/clients/CommInterfaceHook.ts", "../../src/attachments/comm/CommAux.ts", "../../src/core/Program.ts", "../../src/app/utils/data-ring.ts", "../../src/app/utils/loop.ts", "../../src/app/MessageType.ts", "../../src/app/utils/serializers.ts", "../../src/app/utils/listener.ts", "../../src/app/core/messenger.ts", "../../src/worker/CommInterface.worker.ts", "../src/worker-room/app.worker.ts"],
  "sourcesContent": [
    "import { Update } from \"../../types/Update\";\nimport { Data } from \"../../types/Data\";\nimport { Context } from \"@/context/Context\";\n\nexport function filterArray<T>(array: T[], cond: (v: T) => boolean) {\n  let size = 0;\n  for (let i = 0; i < array.length; i++) {\n    array[size] = array[i];\n    if (cond(array[i])) {\n      size++;\n    }\n  }\n  array.length = size;\n}\n\nexport interface UpdatePath {\n  value: any;\n  confirmed: number;\n  isParent?: boolean;\n}\n\n// This function is used to commit updates to the root object\nexport function commitUpdates(\n  { root, incomingUpdates, outgoingUpdates, properties }: Context,\n  updatedPaths: Map<string, UpdatePath>,\n  consolidate?: boolean\n) {\n  if (consolidate) {\n    consolidateUpdates(incomingUpdates, outgoingUpdates);\n  }\n  if (!incomingUpdates.length) {\n    return;\n  }\n  incomingUpdates.forEach((update) => {\n    if (!update.confirmed) {\n      return;\n    }\n\n    const parts = update.path.split(\"/\");\n    const leaf: any = getLeafObject(\n      root,\n      parts,\n      1,\n      true,\n      properties,\n      updatedPaths,\n      update.confirmed\n    );\n    const prop = parts[parts.length - 1];\n    const value = translateValue(update.value, properties);\n    if (value === undefined) {\n      delete leaf[prop];\n      updatedPaths.set(parts.slice(0, parts.length).join(\"/\"), {\n        value: undefined,\n        confirmed: update.confirmed,\n      });\n      updatedPaths.set(parts.slice(0, parts.length - 1).join(\"/\"), {\n        value: leaf,\n        confirmed: update.confirmed,\n        isParent: true,\n      });\n      cleanupRoot(root, parts, 0, updatedPaths, update.confirmed);\n    } else {\n      if (typeof leaf[prop] === undefined) {\n        updatedPaths.set(parts.slice(0, parts.length).join(\"/\"), {\n          value: leaf,\n          confirmed: update.confirmed,\n          isParent: true,\n        });\n      }\n      leaf[prop] = value;\n    }\n    updatedPaths.set(update.path, {\n      value: leaf[prop],\n      confirmed: update.confirmed,\n    });\n  });\n  filterArray(incomingUpdates, (update) => !update.confirmed);\n}\n\n// This function is used to remove empty objects from the root object\nexport function cleanupRoot(\n  root: any,\n  parts: (string | number)[],\n  index: number,\n  updatedPaths: Map<string, UpdatePath>,\n  confirmed: number\n) {\n  if (!root || typeof root !== \"object\" || Array.isArray(root)) {\n    return false;\n  }\n  if (\n    cleanupRoot(root[parts[index]], parts, index + 1, updatedPaths, confirmed)\n  ) {\n    delete root[parts[index]];\n    const leafPath = parts.slice(0, index + 1);\n    updatedPaths.set(leafPath.join(\"/\"), {\n      value: undefined,\n      confirmed,\n    });\n    leafPath.pop();\n    updatedPaths.set(leafPath.join(\"/\"), {\n      value: root,\n      confirmed,\n    }); //  parent affected\n  }\n  return Object.keys(root).length === 0;\n}\n\nfunction compareUpdates(a: Update, b: Update) {\n  if (a.confirmed !== b.confirmed) {\n    return a.confirmed - b.confirmed;\n  }\n  return a.path.localeCompare(b.path);\n}\n\nconst _map: Map<string, Update> = new Map();\nexport function consolidateUpdates(incoming: Update[], outgoing: Update[]) {\n  if (!incoming.length && !outgoing.length) {\n    return;\n  }\n  //  Find actual confirmed updates\n  _map.clear();\n  for (let i = 0; i < incoming.length; i++) {\n    const update = incoming[i];\n    if (update.confirmed) {\n      const existingUpdate = _map.get(update.path);\n      if (!existingUpdate || compareUpdates(existingUpdate, update) < 0) {\n        _map.set(update.path, update);\n      }\n    }\n  }\n  for (let i = 0; i < outgoing.length; i++) {\n    const update = outgoing[i];\n    if (update.confirmed) {\n      const existingUpdate = _map.get(update.path);\n      if (!existingUpdate || compareUpdates(existingUpdate, update) < 0) {\n        _map.set(update.path, update);\n      }\n    }\n  }\n  //  remove redundant updates\n  filterArray(\n    incoming,\n    (update) => !update.confirmed || _map.get(update.path) === update\n  );\n  filterArray(\n    outgoing,\n    (update) => !update.confirmed || _map.get(update.path) === update\n  );\n  _map.clear();\n}\n\n//  Dig into the object to get the leaf object, given the parts of the path\nexport function getLeafObject(\n  obj: Data,\n  parts: (string | number)[],\n  offset: number,\n  autoCreate: boolean,\n  properties: Record<string, any>,\n  updatedPaths?: Map<string, UpdatePath>,\n  confirmed?: number\n): Data {\n  let current = obj;\n  for (let i = 0; i < parts.length - offset; i++) {\n    const prop = parts[i];\n    const value = translateProp(\n      current,\n      prop,\n      properties,\n      autoCreate,\n      updatedPaths,\n      parts.slice(0, i + 1).join(\"/\"),\n      confirmed\n    );\n    if (!value) {\n      return value;\n    }\n    current = value;\n  }\n  return current;\n}\n\nexport function translateValue(value: any, properties: Record<string, any>) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (value.startsWith(\"~{\") && value.endsWith(\"}\")) {\n    switch (value) {\n      default:\n        const group = value.match(/~\\{([^}]+)\\}/);\n        if (group) {\n          return properties[group[1]];\n        }\n    }\n  }\n  return value;\n}\n\nfunction translateProp(\n  obj: any,\n  prop: string | number,\n  properties: Record<string, any>,\n  autoCreate: boolean = false,\n  updatedPaths?: Map<string, UpdatePath>,\n  path?: string,\n  confirmed?: number\n) {\n  const theProp = translateValue(prop, properties);\n  let value = obj[theProp];\n  if (value === undefined && autoCreate) {\n    value = obj[theProp] = {};\n    if (updatedPaths && path && confirmed) {\n      updatedPaths.set(path, {\n        value,\n        confirmed,\n      });\n    }\n  }\n  return value;\n}\n",
    "export function utf8Count(str) {\n    const strLength = str.length;\n    let byteLength = 0;\n    let pos = 0;\n    while (pos < strLength) {\n        let value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            byteLength++;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            byteLength += 2;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    const extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                byteLength += 3;\n            }\n            else {\n                // 4-byte\n                byteLength += 4;\n            }\n        }\n    }\n    return byteLength;\n}\nexport function utf8EncodeJs(str, output, outputOffset) {\n    const strLength = str.length;\n    let offset = outputOffset;\n    let pos = 0;\n    while (pos < strLength) {\n        let value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            output[offset++] = value;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            output[offset++] = ((value >> 6) & 0x1f) | 0xc0;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    const extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                output[offset++] = ((value >> 12) & 0x0f) | 0xe0;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n            else {\n                // 4-byte\n                output[offset++] = ((value >> 18) & 0x07) | 0xf0;\n                output[offset++] = ((value >> 12) & 0x3f) | 0x80;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n        }\n        output[offset++] = (value & 0x3f) | 0x80;\n    }\n}\n// TextEncoder and TextDecoder are standardized in whatwg encoding:\n// https://encoding.spec.whatwg.org/\n// and available in all the modern browsers:\n// https://caniuse.com/textencoder\n// They are available in Node.js since v12 LTS as well:\n// https://nodejs.org/api/globals.html#textencoder\nconst sharedTextEncoder = new TextEncoder();\n// This threshold should be determined by benchmarking, which might vary in engines and input data.\n// Run `npx ts-node benchmark/encode-string.ts` for details.\nconst TEXT_ENCODER_THRESHOLD = 50;\nexport function utf8EncodeTE(str, output, outputOffset) {\n    sharedTextEncoder.encodeInto(str, output.subarray(outputOffset));\n}\nexport function utf8Encode(str, output, outputOffset) {\n    if (str.length > TEXT_ENCODER_THRESHOLD) {\n        utf8EncodeTE(str, output, outputOffset);\n    }\n    else {\n        utf8EncodeJs(str, output, outputOffset);\n    }\n}\nconst CHUNK_SIZE = 4096;\nexport function utf8DecodeJs(bytes, inputOffset, byteLength) {\n    let offset = inputOffset;\n    const end = offset + byteLength;\n    const units = [];\n    let result = \"\";\n    while (offset < end) {\n        const byte1 = bytes[offset++];\n        if ((byte1 & 0x80) === 0) {\n            // 1 byte\n            units.push(byte1);\n        }\n        else if ((byte1 & 0xe0) === 0xc0) {\n            // 2 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 6) | byte2);\n        }\n        else if ((byte1 & 0xf0) === 0xe0) {\n            // 3 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            const byte3 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n        }\n        else if ((byte1 & 0xf8) === 0xf0) {\n            // 4 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            const byte3 = bytes[offset++] & 0x3f;\n            const byte4 = bytes[offset++] & 0x3f;\n            let unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n            if (unit > 0xffff) {\n                unit -= 0x10000;\n                units.push(((unit >>> 10) & 0x3ff) | 0xd800);\n                unit = 0xdc00 | (unit & 0x3ff);\n            }\n            units.push(unit);\n        }\n        else {\n            units.push(byte1);\n        }\n        if (units.length >= CHUNK_SIZE) {\n            result += String.fromCharCode(...units);\n            units.length = 0;\n        }\n    }\n    if (units.length > 0) {\n        result += String.fromCharCode(...units);\n    }\n    return result;\n}\nconst sharedTextDecoder = new TextDecoder();\n// This threshold should be determined by benchmarking, which might vary in engines and input data.\n// Run `npx ts-node benchmark/decode-string.ts` for details.\nconst TEXT_DECODER_THRESHOLD = 200;\nexport function utf8DecodeTD(bytes, inputOffset, byteLength) {\n    const stringBytes = bytes.subarray(inputOffset, inputOffset + byteLength);\n    return sharedTextDecoder.decode(stringBytes);\n}\nexport function utf8Decode(bytes, inputOffset, byteLength) {\n    if (byteLength > TEXT_DECODER_THRESHOLD) {\n        return utf8DecodeTD(bytes, inputOffset, byteLength);\n    }\n    else {\n        return utf8DecodeJs(bytes, inputOffset, byteLength);\n    }\n}\n//# sourceMappingURL=utf8.mjs.map",
    "/**\n * ExtData is used to handle Extension Types that are not registered to ExtensionCodec.\n */\nexport class ExtData {\n    type;\n    data;\n    constructor(type, data) {\n        this.type = type;\n        this.data = data;\n    }\n}\n//# sourceMappingURL=ExtData.mjs.map",
    "export class DecodeError extends Error {\n    constructor(message) {\n        super(message);\n        // fix the prototype chain in a cross-platform way\n        const proto = Object.create(DecodeError.prototype);\n        Object.setPrototypeOf(this, proto);\n        Object.defineProperty(this, \"name\", {\n            configurable: true,\n            enumerable: false,\n            value: DecodeError.name,\n        });\n    }\n}\n//# sourceMappingURL=DecodeError.mjs.map",
    "// Integer Utility\nexport const UINT32_MAX = 4294967295;\n// DataView extension to handle int64 / uint64,\n// where the actual range is 53-bits integer (a.k.a. safe integer)\nexport function setUint64(view, offset, value) {\n    const high = value / 4294967296;\n    const low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function setInt64(view, offset, value) {\n    const high = Math.floor(value / 4294967296);\n    const low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function getInt64(view, offset) {\n    const high = view.getInt32(offset);\n    const low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\nexport function getUint64(view, offset) {\n    const high = view.getUint32(offset);\n    const low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\n//# sourceMappingURL=int.mjs.map",
    "// https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type\nimport { DecodeError } from \"./DecodeError.mjs\";\nimport { getInt64, setInt64 } from \"./utils/int.mjs\";\nexport const EXT_TIMESTAMP = -1;\nconst TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\nconst TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\nexport function encodeTimeSpecToTimestamp({ sec, nsec }) {\n    if (sec >= 0 && nsec >= 0 && sec <= TIMESTAMP64_MAX_SEC) {\n        // Here sec >= 0 && nsec >= 0\n        if (nsec === 0 && sec <= TIMESTAMP32_MAX_SEC) {\n            // timestamp 32 = { sec32 (unsigned) }\n            const rv = new Uint8Array(4);\n            const view = new DataView(rv.buffer);\n            view.setUint32(0, sec);\n            return rv;\n        }\n        else {\n            // timestamp 64 = { nsec30 (unsigned), sec34 (unsigned) }\n            const secHigh = sec / 0x100000000;\n            const secLow = sec & 0xffffffff;\n            const rv = new Uint8Array(8);\n            const view = new DataView(rv.buffer);\n            // nsec30 | secHigh2\n            view.setUint32(0, (nsec << 2) | (secHigh & 0x3));\n            // secLow32\n            view.setUint32(4, secLow);\n            return rv;\n        }\n    }\n    else {\n        // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n        const rv = new Uint8Array(12);\n        const view = new DataView(rv.buffer);\n        view.setUint32(0, nsec);\n        setInt64(view, 4, sec);\n        return rv;\n    }\n}\nexport function encodeDateToTimeSpec(date) {\n    const msec = date.getTime();\n    const sec = Math.floor(msec / 1e3);\n    const nsec = (msec - sec * 1e3) * 1e6;\n    // Normalizes { sec, nsec } to ensure nsec is unsigned.\n    const nsecInSec = Math.floor(nsec / 1e9);\n    return {\n        sec: sec + nsecInSec,\n        nsec: nsec - nsecInSec * 1e9,\n    };\n}\nexport function encodeTimestampExtension(object) {\n    if (object instanceof Date) {\n        const timeSpec = encodeDateToTimeSpec(object);\n        return encodeTimeSpecToTimestamp(timeSpec);\n    }\n    else {\n        return null;\n    }\n}\nexport function decodeTimestampToTimeSpec(data) {\n    const view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    // data may be 32, 64, or 96 bits\n    switch (data.byteLength) {\n        case 4: {\n            // timestamp 32 = { sec32 }\n            const sec = view.getUint32(0);\n            const nsec = 0;\n            return { sec, nsec };\n        }\n        case 8: {\n            // timestamp 64 = { nsec30, sec34 }\n            const nsec30AndSecHigh2 = view.getUint32(0);\n            const secLow32 = view.getUint32(4);\n            const sec = (nsec30AndSecHigh2 & 0x3) * 0x100000000 + secLow32;\n            const nsec = nsec30AndSecHigh2 >>> 2;\n            return { sec, nsec };\n        }\n        case 12: {\n            // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n            const sec = getInt64(view, 4);\n            const nsec = view.getUint32(0);\n            return { sec, nsec };\n        }\n        default:\n            throw new DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${data.length}`);\n    }\n}\nexport function decodeTimestampExtension(data) {\n    const timeSpec = decodeTimestampToTimeSpec(data);\n    return new Date(timeSpec.sec * 1e3 + timeSpec.nsec / 1e6);\n}\nexport const timestampExtension = {\n    type: EXT_TIMESTAMP,\n    encode: encodeTimestampExtension,\n    decode: decodeTimestampExtension,\n};\n//# sourceMappingURL=timestamp.mjs.map",
    "// ExtensionCodec to handle MessagePack extensions\nimport { ExtData } from \"./ExtData.mjs\";\nimport { timestampExtension } from \"./timestamp.mjs\";\nexport class ExtensionCodec {\n    static defaultCodec = new ExtensionCodec();\n    // ensures ExtensionCodecType<X> matches ExtensionCodec<X>\n    // this will make type errors a lot more clear\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    __brand;\n    // built-in extensions\n    builtInEncoders = [];\n    builtInDecoders = [];\n    // custom extensions\n    encoders = [];\n    decoders = [];\n    constructor() {\n        this.register(timestampExtension);\n    }\n    register({ type, encode, decode, }) {\n        if (type >= 0) {\n            // custom extensions\n            this.encoders[type] = encode;\n            this.decoders[type] = decode;\n        }\n        else {\n            // built-in extensions\n            const index = -1 - type;\n            this.builtInEncoders[index] = encode;\n            this.builtInDecoders[index] = decode;\n        }\n    }\n    tryToEncode(object, context) {\n        // built-in extensions\n        for (let i = 0; i < this.builtInEncoders.length; i++) {\n            const encodeExt = this.builtInEncoders[i];\n            if (encodeExt != null) {\n                const data = encodeExt(object, context);\n                if (data != null) {\n                    const type = -1 - i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        // custom extensions\n        for (let i = 0; i < this.encoders.length; i++) {\n            const encodeExt = this.encoders[i];\n            if (encodeExt != null) {\n                const data = encodeExt(object, context);\n                if (data != null) {\n                    const type = i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        if (object instanceof ExtData) {\n            // to keep ExtData as is\n            return object;\n        }\n        return null;\n    }\n    decode(data, type, context) {\n        const decodeExt = type < 0 ? this.builtInDecoders[-1 - type] : this.decoders[type];\n        if (decodeExt) {\n            return decodeExt(data, type, context);\n        }\n        else {\n            // decode() does not fail, returns ExtData instead.\n            return new ExtData(type, data);\n        }\n    }\n}\n//# sourceMappingURL=ExtensionCodec.mjs.map",
    "function isArrayBufferLike(buffer) {\n    return (buffer instanceof ArrayBuffer || (typeof SharedArrayBuffer !== \"undefined\" && buffer instanceof SharedArrayBuffer));\n}\nexport function ensureUint8Array(buffer) {\n    if (buffer instanceof Uint8Array) {\n        return buffer;\n    }\n    else if (ArrayBuffer.isView(buffer)) {\n        return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    else if (isArrayBufferLike(buffer)) {\n        return new Uint8Array(buffer);\n    }\n    else {\n        // ArrayLike<number>\n        return Uint8Array.from(buffer);\n    }\n}\n//# sourceMappingURL=typedArrays.mjs.map",
    "import { utf8Count, utf8Encode } from \"./utils/utf8.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { setInt64, setUint64 } from \"./utils/int.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nexport const DEFAULT_MAX_DEPTH = 100;\nexport const DEFAULT_INITIAL_BUFFER_SIZE = 2048;\nexport class Encoder {\n    extensionCodec;\n    context;\n    useBigInt64;\n    maxDepth;\n    initialBufferSize;\n    sortKeys;\n    forceFloat32;\n    ignoreUndefined;\n    forceIntegerToFloat;\n    pos;\n    view;\n    bytes;\n    entered = false;\n    constructor(options) {\n        this.extensionCodec = options?.extensionCodec ?? ExtensionCodec.defaultCodec;\n        this.context = options?.context; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n        this.useBigInt64 = options?.useBigInt64 ?? false;\n        this.maxDepth = options?.maxDepth ?? DEFAULT_MAX_DEPTH;\n        this.initialBufferSize = options?.initialBufferSize ?? DEFAULT_INITIAL_BUFFER_SIZE;\n        this.sortKeys = options?.sortKeys ?? false;\n        this.forceFloat32 = options?.forceFloat32 ?? false;\n        this.ignoreUndefined = options?.ignoreUndefined ?? false;\n        this.forceIntegerToFloat = options?.forceIntegerToFloat ?? false;\n        this.pos = 0;\n        this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n        this.bytes = new Uint8Array(this.view.buffer);\n    }\n    clone() {\n        // Because of slightly special argument `context`,\n        // type assertion is needed.\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return new Encoder({\n            extensionCodec: this.extensionCodec,\n            context: this.context,\n            useBigInt64: this.useBigInt64,\n            maxDepth: this.maxDepth,\n            initialBufferSize: this.initialBufferSize,\n            sortKeys: this.sortKeys,\n            forceFloat32: this.forceFloat32,\n            ignoreUndefined: this.ignoreUndefined,\n            forceIntegerToFloat: this.forceIntegerToFloat,\n        });\n    }\n    reinitializeState() {\n        this.pos = 0;\n    }\n    /**\n     * This is almost equivalent to {@link Encoder#encode}, but it returns an reference of the encoder's internal buffer and thus much faster than {@link Encoder#encode}.\n     *\n     * @returns Encodes the object and returns a shared reference the encoder's internal buffer.\n     */\n    encodeSharedRef(object) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.encodeSharedRef(object);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.doEncode(object, 1);\n            return this.bytes.subarray(0, this.pos);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    /**\n     * @returns Encodes the object and returns a copy of the encoder's internal buffer.\n     */\n    encode(object) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.encode(object);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.doEncode(object, 1);\n            return this.bytes.slice(0, this.pos);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    doEncode(object, depth) {\n        if (depth > this.maxDepth) {\n            throw new Error(`Too deep objects in depth ${depth}`);\n        }\n        if (object == null) {\n            this.encodeNil();\n        }\n        else if (typeof object === \"boolean\") {\n            this.encodeBoolean(object);\n        }\n        else if (typeof object === \"number\") {\n            if (!this.forceIntegerToFloat) {\n                this.encodeNumber(object);\n            }\n            else {\n                this.encodeNumberAsFloat(object);\n            }\n        }\n        else if (typeof object === \"string\") {\n            this.encodeString(object);\n        }\n        else if (this.useBigInt64 && typeof object === \"bigint\") {\n            this.encodeBigInt64(object);\n        }\n        else {\n            this.encodeObject(object, depth);\n        }\n    }\n    ensureBufferSizeToWrite(sizeToWrite) {\n        const requiredSize = this.pos + sizeToWrite;\n        if (this.view.byteLength < requiredSize) {\n            this.resizeBuffer(requiredSize * 2);\n        }\n    }\n    resizeBuffer(newSize) {\n        const newBuffer = new ArrayBuffer(newSize);\n        const newBytes = new Uint8Array(newBuffer);\n        const newView = new DataView(newBuffer);\n        newBytes.set(this.bytes);\n        this.view = newView;\n        this.bytes = newBytes;\n    }\n    encodeNil() {\n        this.writeU8(0xc0);\n    }\n    encodeBoolean(object) {\n        if (object === false) {\n            this.writeU8(0xc2);\n        }\n        else {\n            this.writeU8(0xc3);\n        }\n    }\n    encodeNumber(object) {\n        if (!this.forceIntegerToFloat && Number.isSafeInteger(object)) {\n            if (object >= 0) {\n                if (object < 0x80) {\n                    // positive fixint\n                    this.writeU8(object);\n                }\n                else if (object < 0x100) {\n                    // uint 8\n                    this.writeU8(0xcc);\n                    this.writeU8(object);\n                }\n                else if (object < 0x10000) {\n                    // uint 16\n                    this.writeU8(0xcd);\n                    this.writeU16(object);\n                }\n                else if (object < 0x100000000) {\n                    // uint 32\n                    this.writeU8(0xce);\n                    this.writeU32(object);\n                }\n                else if (!this.useBigInt64) {\n                    // uint 64\n                    this.writeU8(0xcf);\n                    this.writeU64(object);\n                }\n                else {\n                    this.encodeNumberAsFloat(object);\n                }\n            }\n            else {\n                if (object >= -0x20) {\n                    // negative fixint\n                    this.writeU8(0xe0 | (object + 0x20));\n                }\n                else if (object >= -0x80) {\n                    // int 8\n                    this.writeU8(0xd0);\n                    this.writeI8(object);\n                }\n                else if (object >= -0x8000) {\n                    // int 16\n                    this.writeU8(0xd1);\n                    this.writeI16(object);\n                }\n                else if (object >= -0x80000000) {\n                    // int 32\n                    this.writeU8(0xd2);\n                    this.writeI32(object);\n                }\n                else if (!this.useBigInt64) {\n                    // int 64\n                    this.writeU8(0xd3);\n                    this.writeI64(object);\n                }\n                else {\n                    this.encodeNumberAsFloat(object);\n                }\n            }\n        }\n        else {\n            this.encodeNumberAsFloat(object);\n        }\n    }\n    encodeNumberAsFloat(object) {\n        if (this.forceFloat32) {\n            // float 32\n            this.writeU8(0xca);\n            this.writeF32(object);\n        }\n        else {\n            // float 64\n            this.writeU8(0xcb);\n            this.writeF64(object);\n        }\n    }\n    encodeBigInt64(object) {\n        if (object >= BigInt(0)) {\n            // uint 64\n            this.writeU8(0xcf);\n            this.writeBigUint64(object);\n        }\n        else {\n            // int 64\n            this.writeU8(0xd3);\n            this.writeBigInt64(object);\n        }\n    }\n    writeStringHeader(byteLength) {\n        if (byteLength < 32) {\n            // fixstr\n            this.writeU8(0xa0 + byteLength);\n        }\n        else if (byteLength < 0x100) {\n            // str 8\n            this.writeU8(0xd9);\n            this.writeU8(byteLength);\n        }\n        else if (byteLength < 0x10000) {\n            // str 16\n            this.writeU8(0xda);\n            this.writeU16(byteLength);\n        }\n        else if (byteLength < 0x100000000) {\n            // str 32\n            this.writeU8(0xdb);\n            this.writeU32(byteLength);\n        }\n        else {\n            throw new Error(`Too long string: ${byteLength} bytes in UTF-8`);\n        }\n    }\n    encodeString(object) {\n        const maxHeaderSize = 1 + 4;\n        const byteLength = utf8Count(object);\n        this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n        this.writeStringHeader(byteLength);\n        utf8Encode(object, this.bytes, this.pos);\n        this.pos += byteLength;\n    }\n    encodeObject(object, depth) {\n        // try to encode objects with custom codec first of non-primitives\n        const ext = this.extensionCodec.tryToEncode(object, this.context);\n        if (ext != null) {\n            this.encodeExtension(ext);\n        }\n        else if (Array.isArray(object)) {\n            this.encodeArray(object, depth);\n        }\n        else if (ArrayBuffer.isView(object)) {\n            this.encodeBinary(object);\n        }\n        else if (typeof object === \"object\") {\n            this.encodeMap(object, depth);\n        }\n        else {\n            // symbol, function and other special object come here unless extensionCodec handles them.\n            throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(object)}`);\n        }\n    }\n    encodeBinary(object) {\n        const size = object.byteLength;\n        if (size < 0x100) {\n            // bin 8\n            this.writeU8(0xc4);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // bin 16\n            this.writeU8(0xc5);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // bin 32\n            this.writeU8(0xc6);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large binary: ${size}`);\n        }\n        const bytes = ensureUint8Array(object);\n        this.writeU8a(bytes);\n    }\n    encodeArray(object, depth) {\n        const size = object.length;\n        if (size < 16) {\n            // fixarray\n            this.writeU8(0x90 + size);\n        }\n        else if (size < 0x10000) {\n            // array 16\n            this.writeU8(0xdc);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // array 32\n            this.writeU8(0xdd);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large array: ${size}`);\n        }\n        for (const item of object) {\n            this.doEncode(item, depth + 1);\n        }\n    }\n    countWithoutUndefined(object, keys) {\n        let count = 0;\n        for (const key of keys) {\n            if (object[key] !== undefined) {\n                count++;\n            }\n        }\n        return count;\n    }\n    encodeMap(object, depth) {\n        const keys = Object.keys(object);\n        if (this.sortKeys) {\n            keys.sort();\n        }\n        const size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n        if (size < 16) {\n            // fixmap\n            this.writeU8(0x80 + size);\n        }\n        else if (size < 0x10000) {\n            // map 16\n            this.writeU8(0xde);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // map 32\n            this.writeU8(0xdf);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large map object: ${size}`);\n        }\n        for (const key of keys) {\n            const value = object[key];\n            if (!(this.ignoreUndefined && value === undefined)) {\n                this.encodeString(key);\n                this.doEncode(value, depth + 1);\n            }\n        }\n    }\n    encodeExtension(ext) {\n        if (typeof ext.data === \"function\") {\n            const data = ext.data(this.pos + 6);\n            const size = data.length;\n            if (size >= 0x100000000) {\n                throw new Error(`Too large extension object: ${size}`);\n            }\n            this.writeU8(0xc9);\n            this.writeU32(size);\n            this.writeI8(ext.type);\n            this.writeU8a(data);\n            return;\n        }\n        const size = ext.data.length;\n        if (size === 1) {\n            // fixext 1\n            this.writeU8(0xd4);\n        }\n        else if (size === 2) {\n            // fixext 2\n            this.writeU8(0xd5);\n        }\n        else if (size === 4) {\n            // fixext 4\n            this.writeU8(0xd6);\n        }\n        else if (size === 8) {\n            // fixext 8\n            this.writeU8(0xd7);\n        }\n        else if (size === 16) {\n            // fixext 16\n            this.writeU8(0xd8);\n        }\n        else if (size < 0x100) {\n            // ext 8\n            this.writeU8(0xc7);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // ext 16\n            this.writeU8(0xc8);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // ext 32\n            this.writeU8(0xc9);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large extension object: ${size}`);\n        }\n        this.writeI8(ext.type);\n        this.writeU8a(ext.data);\n    }\n    writeU8(value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setUint8(this.pos, value);\n        this.pos++;\n    }\n    writeU8a(values) {\n        const size = values.length;\n        this.ensureBufferSizeToWrite(size);\n        this.bytes.set(values, this.pos);\n        this.pos += size;\n    }\n    writeI8(value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setInt8(this.pos, value);\n        this.pos++;\n    }\n    writeU16(value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setUint16(this.pos, value);\n        this.pos += 2;\n    }\n    writeI16(value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setInt16(this.pos, value);\n        this.pos += 2;\n    }\n    writeU32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setUint32(this.pos, value);\n        this.pos += 4;\n    }\n    writeI32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setInt32(this.pos, value);\n        this.pos += 4;\n    }\n    writeF32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setFloat32(this.pos, value);\n        this.pos += 4;\n    }\n    writeF64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setFloat64(this.pos, value);\n        this.pos += 8;\n    }\n    writeU64(value) {\n        this.ensureBufferSizeToWrite(8);\n        setUint64(this.view, this.pos, value);\n        this.pos += 8;\n    }\n    writeI64(value) {\n        this.ensureBufferSizeToWrite(8);\n        setInt64(this.view, this.pos, value);\n        this.pos += 8;\n    }\n    writeBigUint64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setBigUint64(this.pos, value);\n        this.pos += 8;\n    }\n    writeBigInt64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setBigInt64(this.pos, value);\n        this.pos += 8;\n    }\n}\n//# sourceMappingURL=Encoder.mjs.map",
    "import { Encoder } from \"./Encoder.mjs\";\n/**\n * It encodes `value` in the MessagePack format and\n * returns a byte buffer.\n *\n * The returned buffer is a slice of a larger `ArrayBuffer`, so you have to use its `#byteOffset` and `#byteLength` in order to convert it to another typed arrays including NodeJS `Buffer`.\n */\nexport function encode(value, options) {\n    const encoder = new Encoder(options);\n    return encoder.encodeSharedRef(value);\n}\n//# sourceMappingURL=encode.mjs.map",
    "export function prettyByte(byte) {\n    return `${byte < 0 ? \"-\" : \"\"}0x${Math.abs(byte).toString(16).padStart(2, \"0\")}`;\n}\n//# sourceMappingURL=prettyByte.mjs.map",
    "import { utf8DecodeJs } from \"./utils/utf8.mjs\";\nconst DEFAULT_MAX_KEY_LENGTH = 16;\nconst DEFAULT_MAX_LENGTH_PER_KEY = 16;\nexport class CachedKeyDecoder {\n    hit = 0;\n    miss = 0;\n    caches;\n    maxKeyLength;\n    maxLengthPerKey;\n    constructor(maxKeyLength = DEFAULT_MAX_KEY_LENGTH, maxLengthPerKey = DEFAULT_MAX_LENGTH_PER_KEY) {\n        this.maxKeyLength = maxKeyLength;\n        this.maxLengthPerKey = maxLengthPerKey;\n        // avoid `new Array(N)`, which makes a sparse array,\n        // because a sparse array is typically slower than a non-sparse array.\n        this.caches = [];\n        for (let i = 0; i < this.maxKeyLength; i++) {\n            this.caches.push([]);\n        }\n    }\n    canBeCached(byteLength) {\n        return byteLength > 0 && byteLength <= this.maxKeyLength;\n    }\n    find(bytes, inputOffset, byteLength) {\n        const records = this.caches[byteLength - 1];\n        FIND_CHUNK: for (const record of records) {\n            const recordBytes = record.bytes;\n            for (let j = 0; j < byteLength; j++) {\n                if (recordBytes[j] !== bytes[inputOffset + j]) {\n                    continue FIND_CHUNK;\n                }\n            }\n            return record.str;\n        }\n        return null;\n    }\n    store(bytes, value) {\n        const records = this.caches[bytes.length - 1];\n        const record = { bytes, str: value };\n        if (records.length >= this.maxLengthPerKey) {\n            // `records` are full!\n            // Set `record` to an arbitrary position.\n            records[(Math.random() * records.length) | 0] = record;\n        }\n        else {\n            records.push(record);\n        }\n    }\n    decode(bytes, inputOffset, byteLength) {\n        const cachedValue = this.find(bytes, inputOffset, byteLength);\n        if (cachedValue != null) {\n            this.hit++;\n            return cachedValue;\n        }\n        this.miss++;\n        const str = utf8DecodeJs(bytes, inputOffset, byteLength);\n        // Ensure to copy a slice of bytes because the bytes may be a NodeJS Buffer and Buffer#slice() returns a reference to its internal ArrayBuffer.\n        const slicedCopyOfBytes = Uint8Array.prototype.slice.call(bytes, inputOffset, inputOffset + byteLength);\n        this.store(slicedCopyOfBytes, str);\n        return str;\n    }\n}\n//# sourceMappingURL=CachedKeyDecoder.mjs.map",
    "import { prettyByte } from \"./utils/prettyByte.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int.mjs\";\nimport { utf8Decode } from \"./utils/utf8.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nimport { CachedKeyDecoder } from \"./CachedKeyDecoder.mjs\";\nimport { DecodeError } from \"./DecodeError.mjs\";\nconst STATE_ARRAY = \"array\";\nconst STATE_MAP_KEY = \"map_key\";\nconst STATE_MAP_VALUE = \"map_value\";\nconst mapKeyConverter = (key) => {\n    if (typeof key === \"string\" || typeof key === \"number\") {\n        return key;\n    }\n    throw new DecodeError(\"The type of key must be string or number but \" + typeof key);\n};\nclass StackPool {\n    stack = [];\n    stackHeadPosition = -1;\n    get length() {\n        return this.stackHeadPosition + 1;\n    }\n    top() {\n        return this.stack[this.stackHeadPosition];\n    }\n    pushArrayState(size) {\n        const state = this.getUninitializedStateFromPool();\n        state.type = STATE_ARRAY;\n        state.position = 0;\n        state.size = size;\n        state.array = new Array(size);\n    }\n    pushMapState(size) {\n        const state = this.getUninitializedStateFromPool();\n        state.type = STATE_MAP_KEY;\n        state.readCount = 0;\n        state.size = size;\n        state.map = {};\n    }\n    getUninitializedStateFromPool() {\n        this.stackHeadPosition++;\n        if (this.stackHeadPosition === this.stack.length) {\n            const partialState = {\n                type: undefined,\n                size: 0,\n                array: undefined,\n                position: 0,\n                readCount: 0,\n                map: undefined,\n                key: null,\n            };\n            this.stack.push(partialState);\n        }\n        return this.stack[this.stackHeadPosition];\n    }\n    release(state) {\n        const topStackState = this.stack[this.stackHeadPosition];\n        if (topStackState !== state) {\n            throw new Error(\"Invalid stack state. Released state is not on top of the stack.\");\n        }\n        if (state.type === STATE_ARRAY) {\n            const partialState = state;\n            partialState.size = 0;\n            partialState.array = undefined;\n            partialState.position = 0;\n            partialState.type = undefined;\n        }\n        if (state.type === STATE_MAP_KEY || state.type === STATE_MAP_VALUE) {\n            const partialState = state;\n            partialState.size = 0;\n            partialState.map = undefined;\n            partialState.readCount = 0;\n            partialState.type = undefined;\n        }\n        this.stackHeadPosition--;\n    }\n    reset() {\n        this.stack.length = 0;\n        this.stackHeadPosition = -1;\n    }\n}\nconst HEAD_BYTE_REQUIRED = -1;\nconst EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nconst EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\ntry {\n    // IE11: The spec says it should throw RangeError,\n    // IE11: but in IE11 it throws TypeError.\n    EMPTY_VIEW.getInt8(0);\n}\ncatch (e) {\n    if (!(e instanceof RangeError)) {\n        throw new Error(\"This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access\");\n    }\n}\nconst MORE_DATA = new RangeError(\"Insufficient data\");\nconst sharedCachedKeyDecoder = new CachedKeyDecoder();\nexport class Decoder {\n    extensionCodec;\n    context;\n    useBigInt64;\n    rawStrings;\n    maxStrLength;\n    maxBinLength;\n    maxArrayLength;\n    maxMapLength;\n    maxExtLength;\n    keyDecoder;\n    mapKeyConverter;\n    totalPos = 0;\n    pos = 0;\n    view = EMPTY_VIEW;\n    bytes = EMPTY_BYTES;\n    headByte = HEAD_BYTE_REQUIRED;\n    stack = new StackPool();\n    entered = false;\n    constructor(options) {\n        this.extensionCodec = options?.extensionCodec ?? ExtensionCodec.defaultCodec;\n        this.context = options?.context; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n        this.useBigInt64 = options?.useBigInt64 ?? false;\n        this.rawStrings = options?.rawStrings ?? false;\n        this.maxStrLength = options?.maxStrLength ?? UINT32_MAX;\n        this.maxBinLength = options?.maxBinLength ?? UINT32_MAX;\n        this.maxArrayLength = options?.maxArrayLength ?? UINT32_MAX;\n        this.maxMapLength = options?.maxMapLength ?? UINT32_MAX;\n        this.maxExtLength = options?.maxExtLength ?? UINT32_MAX;\n        this.keyDecoder = options?.keyDecoder !== undefined ? options.keyDecoder : sharedCachedKeyDecoder;\n        this.mapKeyConverter = options?.mapKeyConverter ?? mapKeyConverter;\n    }\n    clone() {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return new Decoder({\n            extensionCodec: this.extensionCodec,\n            context: this.context,\n            useBigInt64: this.useBigInt64,\n            rawStrings: this.rawStrings,\n            maxStrLength: this.maxStrLength,\n            maxBinLength: this.maxBinLength,\n            maxArrayLength: this.maxArrayLength,\n            maxMapLength: this.maxMapLength,\n            maxExtLength: this.maxExtLength,\n            keyDecoder: this.keyDecoder,\n        });\n    }\n    reinitializeState() {\n        this.totalPos = 0;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack.reset();\n        // view, bytes, and pos will be re-initialized in setBuffer()\n    }\n    setBuffer(buffer) {\n        const bytes = ensureUint8Array(buffer);\n        this.bytes = bytes;\n        this.view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n        this.pos = 0;\n    }\n    appendBuffer(buffer) {\n        if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n            this.setBuffer(buffer);\n        }\n        else {\n            const remainingData = this.bytes.subarray(this.pos);\n            const newData = ensureUint8Array(buffer);\n            // concat remainingData + newData\n            const newBuffer = new Uint8Array(remainingData.length + newData.length);\n            newBuffer.set(remainingData);\n            newBuffer.set(newData, remainingData.length);\n            this.setBuffer(newBuffer);\n        }\n    }\n    hasRemaining(size) {\n        return this.view.byteLength - this.pos >= size;\n    }\n    createExtraByteError(posToShow) {\n        const { view, pos } = this;\n        return new RangeError(`Extra ${view.byteLength - pos} of ${view.byteLength} byte(s) found at buffer[${posToShow}]`);\n    }\n    /**\n     * @throws {@link DecodeError}\n     * @throws {@link RangeError}\n     */\n    decode(buffer) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.decode(buffer);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.setBuffer(buffer);\n            const object = this.doDecodeSync();\n            if (this.hasRemaining(1)) {\n                throw this.createExtraByteError(this.pos);\n            }\n            return object;\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    *decodeMulti(buffer) {\n        if (this.entered) {\n            const instance = this.clone();\n            yield* instance.decodeMulti(buffer);\n            return;\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.setBuffer(buffer);\n            while (this.hasRemaining(1)) {\n                yield this.doDecodeSync();\n            }\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    async decodeAsync(stream) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.decodeAsync(stream);\n        }\n        try {\n            this.entered = true;\n            let decoded = false;\n            let object;\n            for await (const buffer of stream) {\n                if (decoded) {\n                    this.entered = false;\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                this.appendBuffer(buffer);\n                try {\n                    object = this.doDecodeSync();\n                    decoded = true;\n                }\n                catch (e) {\n                    if (!(e instanceof RangeError)) {\n                        throw e; // rethrow\n                    }\n                    // fallthrough\n                }\n                this.totalPos += this.pos;\n            }\n            if (decoded) {\n                if (this.hasRemaining(1)) {\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                return object;\n            }\n            const { headByte, pos, totalPos } = this;\n            throw new RangeError(`Insufficient data in parsing ${prettyByte(headByte)} at ${totalPos} (${pos} in the current buffer)`);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    decodeArrayStream(stream) {\n        return this.decodeMultiAsync(stream, true);\n    }\n    decodeStream(stream) {\n        return this.decodeMultiAsync(stream, false);\n    }\n    async *decodeMultiAsync(stream, isArray) {\n        if (this.entered) {\n            const instance = this.clone();\n            yield* instance.decodeMultiAsync(stream, isArray);\n            return;\n        }\n        try {\n            this.entered = true;\n            let isArrayHeaderRequired = isArray;\n            let arrayItemsLeft = -1;\n            for await (const buffer of stream) {\n                if (isArray && arrayItemsLeft === 0) {\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                this.appendBuffer(buffer);\n                if (isArrayHeaderRequired) {\n                    arrayItemsLeft = this.readArraySize();\n                    isArrayHeaderRequired = false;\n                    this.complete();\n                }\n                try {\n                    while (true) {\n                        yield this.doDecodeSync();\n                        if (--arrayItemsLeft === 0) {\n                            break;\n                        }\n                    }\n                }\n                catch (e) {\n                    if (!(e instanceof RangeError)) {\n                        throw e; // rethrow\n                    }\n                    // fallthrough\n                }\n                this.totalPos += this.pos;\n            }\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    doDecodeSync() {\n        DECODE: while (true) {\n            const headByte = this.readHeadByte();\n            let object;\n            if (headByte >= 0xe0) {\n                // negative fixint (111x xxxx) 0xe0 - 0xff\n                object = headByte - 0x100;\n            }\n            else if (headByte < 0xc0) {\n                if (headByte < 0x80) {\n                    // positive fixint (0xxx xxxx) 0x00 - 0x7f\n                    object = headByte;\n                }\n                else if (headByte < 0x90) {\n                    // fixmap (1000 xxxx) 0x80 - 0x8f\n                    const size = headByte - 0x80;\n                    if (size !== 0) {\n                        this.pushMapState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = {};\n                    }\n                }\n                else if (headByte < 0xa0) {\n                    // fixarray (1001 xxxx) 0x90 - 0x9f\n                    const size = headByte - 0x90;\n                    if (size !== 0) {\n                        this.pushArrayState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = [];\n                    }\n                }\n                else {\n                    // fixstr (101x xxxx) 0xa0 - 0xbf\n                    const byteLength = headByte - 0xa0;\n                    object = this.decodeString(byteLength, 0);\n                }\n            }\n            else if (headByte === 0xc0) {\n                // nil\n                object = null;\n            }\n            else if (headByte === 0xc2) {\n                // false\n                object = false;\n            }\n            else if (headByte === 0xc3) {\n                // true\n                object = true;\n            }\n            else if (headByte === 0xca) {\n                // float 32\n                object = this.readF32();\n            }\n            else if (headByte === 0xcb) {\n                // float 64\n                object = this.readF64();\n            }\n            else if (headByte === 0xcc) {\n                // uint 8\n                object = this.readU8();\n            }\n            else if (headByte === 0xcd) {\n                // uint 16\n                object = this.readU16();\n            }\n            else if (headByte === 0xce) {\n                // uint 32\n                object = this.readU32();\n            }\n            else if (headByte === 0xcf) {\n                // uint 64\n                if (this.useBigInt64) {\n                    object = this.readU64AsBigInt();\n                }\n                else {\n                    object = this.readU64();\n                }\n            }\n            else if (headByte === 0xd0) {\n                // int 8\n                object = this.readI8();\n            }\n            else if (headByte === 0xd1) {\n                // int 16\n                object = this.readI16();\n            }\n            else if (headByte === 0xd2) {\n                // int 32\n                object = this.readI32();\n            }\n            else if (headByte === 0xd3) {\n                // int 64\n                if (this.useBigInt64) {\n                    object = this.readI64AsBigInt();\n                }\n                else {\n                    object = this.readI64();\n                }\n            }\n            else if (headByte === 0xd9) {\n                // str 8\n                const byteLength = this.lookU8();\n                object = this.decodeString(byteLength, 1);\n            }\n            else if (headByte === 0xda) {\n                // str 16\n                const byteLength = this.lookU16();\n                object = this.decodeString(byteLength, 2);\n            }\n            else if (headByte === 0xdb) {\n                // str 32\n                const byteLength = this.lookU32();\n                object = this.decodeString(byteLength, 4);\n            }\n            else if (headByte === 0xdc) {\n                // array 16\n                const size = this.readU16();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xdd) {\n                // array 32\n                const size = this.readU32();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xde) {\n                // map 16\n                const size = this.readU16();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xdf) {\n                // map 32\n                const size = this.readU32();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xc4) {\n                // bin 8\n                const size = this.lookU8();\n                object = this.decodeBinary(size, 1);\n            }\n            else if (headByte === 0xc5) {\n                // bin 16\n                const size = this.lookU16();\n                object = this.decodeBinary(size, 2);\n            }\n            else if (headByte === 0xc6) {\n                // bin 32\n                const size = this.lookU32();\n                object = this.decodeBinary(size, 4);\n            }\n            else if (headByte === 0xd4) {\n                // fixext 1\n                object = this.decodeExtension(1, 0);\n            }\n            else if (headByte === 0xd5) {\n                // fixext 2\n                object = this.decodeExtension(2, 0);\n            }\n            else if (headByte === 0xd6) {\n                // fixext 4\n                object = this.decodeExtension(4, 0);\n            }\n            else if (headByte === 0xd7) {\n                // fixext 8\n                object = this.decodeExtension(8, 0);\n            }\n            else if (headByte === 0xd8) {\n                // fixext 16\n                object = this.decodeExtension(16, 0);\n            }\n            else if (headByte === 0xc7) {\n                // ext 8\n                const size = this.lookU8();\n                object = this.decodeExtension(size, 1);\n            }\n            else if (headByte === 0xc8) {\n                // ext 16\n                const size = this.lookU16();\n                object = this.decodeExtension(size, 2);\n            }\n            else if (headByte === 0xc9) {\n                // ext 32\n                const size = this.lookU32();\n                object = this.decodeExtension(size, 4);\n            }\n            else {\n                throw new DecodeError(`Unrecognized type byte: ${prettyByte(headByte)}`);\n            }\n            this.complete();\n            const stack = this.stack;\n            while (stack.length > 0) {\n                // arrays and maps\n                const state = stack.top();\n                if (state.type === STATE_ARRAY) {\n                    state.array[state.position] = object;\n                    state.position++;\n                    if (state.position === state.size) {\n                        object = state.array;\n                        stack.release(state);\n                    }\n                    else {\n                        continue DECODE;\n                    }\n                }\n                else if (state.type === STATE_MAP_KEY) {\n                    if (object === \"__proto__\") {\n                        throw new DecodeError(\"The key __proto__ is not allowed\");\n                    }\n                    state.key = this.mapKeyConverter(object);\n                    state.type = STATE_MAP_VALUE;\n                    continue DECODE;\n                }\n                else {\n                    // it must be `state.type === State.MAP_VALUE` here\n                    state.map[state.key] = object;\n                    state.readCount++;\n                    if (state.readCount === state.size) {\n                        object = state.map;\n                        stack.release(state);\n                    }\n                    else {\n                        state.key = null;\n                        state.type = STATE_MAP_KEY;\n                        continue DECODE;\n                    }\n                }\n            }\n            return object;\n        }\n    }\n    readHeadByte() {\n        if (this.headByte === HEAD_BYTE_REQUIRED) {\n            this.headByte = this.readU8();\n            // console.log(\"headByte\", prettyByte(this.headByte));\n        }\n        return this.headByte;\n    }\n    complete() {\n        this.headByte = HEAD_BYTE_REQUIRED;\n    }\n    readArraySize() {\n        const headByte = this.readHeadByte();\n        switch (headByte) {\n            case 0xdc:\n                return this.readU16();\n            case 0xdd:\n                return this.readU32();\n            default: {\n                if (headByte < 0xa0) {\n                    return headByte - 0x90;\n                }\n                else {\n                    throw new DecodeError(`Unrecognized array type byte: ${prettyByte(headByte)}`);\n                }\n            }\n        }\n    }\n    pushMapState(size) {\n        if (size > this.maxMapLength) {\n            throw new DecodeError(`Max length exceeded: map length (${size}) > maxMapLengthLength (${this.maxMapLength})`);\n        }\n        this.stack.pushMapState(size);\n    }\n    pushArrayState(size) {\n        if (size > this.maxArrayLength) {\n            throw new DecodeError(`Max length exceeded: array length (${size}) > maxArrayLength (${this.maxArrayLength})`);\n        }\n        this.stack.pushArrayState(size);\n    }\n    decodeString(byteLength, headerOffset) {\n        if (!this.rawStrings || this.stateIsMapKey()) {\n            return this.decodeUtf8String(byteLength, headerOffset);\n        }\n        return this.decodeBinary(byteLength, headerOffset);\n    }\n    /**\n     * @throws {@link RangeError}\n     */\n    decodeUtf8String(byteLength, headerOffset) {\n        if (byteLength > this.maxStrLength) {\n            throw new DecodeError(`Max length exceeded: UTF-8 byte length (${byteLength}) > maxStrLength (${this.maxStrLength})`);\n        }\n        if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n            throw MORE_DATA;\n        }\n        const offset = this.pos + headerOffset;\n        let object;\n        if (this.stateIsMapKey() && this.keyDecoder?.canBeCached(byteLength)) {\n            object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n        }\n        else {\n            object = utf8Decode(this.bytes, offset, byteLength);\n        }\n        this.pos += headerOffset + byteLength;\n        return object;\n    }\n    stateIsMapKey() {\n        if (this.stack.length > 0) {\n            const state = this.stack.top();\n            return state.type === STATE_MAP_KEY;\n        }\n        return false;\n    }\n    /**\n     * @throws {@link RangeError}\n     */\n    decodeBinary(byteLength, headOffset) {\n        if (byteLength > this.maxBinLength) {\n            throw new DecodeError(`Max length exceeded: bin length (${byteLength}) > maxBinLength (${this.maxBinLength})`);\n        }\n        if (!this.hasRemaining(byteLength + headOffset)) {\n            throw MORE_DATA;\n        }\n        const offset = this.pos + headOffset;\n        const object = this.bytes.subarray(offset, offset + byteLength);\n        this.pos += headOffset + byteLength;\n        return object;\n    }\n    decodeExtension(size, headOffset) {\n        if (size > this.maxExtLength) {\n            throw new DecodeError(`Max length exceeded: ext length (${size}) > maxExtLength (${this.maxExtLength})`);\n        }\n        const extType = this.view.getInt8(this.pos + headOffset);\n        const data = this.decodeBinary(size, headOffset + 1 /* extType */);\n        return this.extensionCodec.decode(data, extType, this.context);\n    }\n    lookU8() {\n        return this.view.getUint8(this.pos);\n    }\n    lookU16() {\n        return this.view.getUint16(this.pos);\n    }\n    lookU32() {\n        return this.view.getUint32(this.pos);\n    }\n    readU8() {\n        const value = this.view.getUint8(this.pos);\n        this.pos++;\n        return value;\n    }\n    readI8() {\n        const value = this.view.getInt8(this.pos);\n        this.pos++;\n        return value;\n    }\n    readU16() {\n        const value = this.view.getUint16(this.pos);\n        this.pos += 2;\n        return value;\n    }\n    readI16() {\n        const value = this.view.getInt16(this.pos);\n        this.pos += 2;\n        return value;\n    }\n    readU32() {\n        const value = this.view.getUint32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readI32() {\n        const value = this.view.getInt32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readU64() {\n        const value = getUint64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readI64() {\n        const value = getInt64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readU64AsBigInt() {\n        const value = this.view.getBigUint64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readI64AsBigInt() {\n        const value = this.view.getBigInt64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readF32() {\n        const value = this.view.getFloat32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readF64() {\n        const value = this.view.getFloat64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n}\n//# sourceMappingURL=Decoder.mjs.map",
    "import { Decoder } from \"./Decoder.mjs\";\n/**\n * It decodes a single MessagePack object in a buffer.\n *\n * This is a synchronous decoding function.\n * See other variants for asynchronous decoding: {@link decodeAsync}, {@link decodeMultiStream}, or {@link decodeArrayStream}.\n *\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decode(buffer, options) {\n    const decoder = new Decoder(options);\n    return decoder.decode(buffer);\n}\n/**\n * It decodes multiple MessagePack objects in a buffer.\n * This is corresponding to {@link decodeMultiStream}.\n *\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decodeMulti(buffer, options) {\n    const decoder = new Decoder(options);\n    return decoder.decodeMulti(buffer);\n}\n//# sourceMappingURL=decode.mjs.map",
    "/// <reference lib=\"dom\" />\n/// <reference lib=\"dom.iterable\" />\n\nimport { decode, encode } from \"@msgpack/msgpack\";\nimport { Context } from \"../context/Context\";\nimport {\n  commitUpdates,\n  consolidateUpdates,\n  translateValue,\n  UpdatePath,\n} from \"../cycles/data-update/data-update\";\nimport { Payload } from \"@/types/Payload\";\nimport { OutgoingCom } from \"@/clients/CommInterface\";\n\nexport class Processor {\n  private readonly outingCom = new Set<OutgoingCom>();\n\n  connectComm(comm: OutgoingCom) {\n    this.outingCom.add(comm);\n    return () => {\n      this.outingCom.delete(comm);\n    };\n  }\n\n  performCycle(context: Context, updatedPaths: Map<string, UpdatePath>) {\n    consolidateUpdates(context.incomingUpdates, context.outgoingUpdates);\n    //  Send out outgoing updates\n    this.sendOutgoingUpdate(context);\n    //  Process incoming updates\n    commitUpdates(context, updatedPaths);\n  }\n\n  receivedData(data: Uint8Array | SharedArrayBuffer, context: Context) {\n    const payload = decode(data) as Payload;\n    if (!payload.updates?.length) return;\n    context.incomingUpdates.push(...payload.updates);\n  }\n\n  private sendOutgoingUpdate(context: Context) {\n    if (!context.outgoingUpdates.length) return;\n    //  Apply function to value\n    context.outgoingUpdates.forEach((update) => {\n      update.path = this.fixPath(update.path, context);\n    });\n\n    //  Apply incoming updates\n    context.outgoingUpdates.forEach((update) => {\n      if (update.confirmed) {\n        context.incomingUpdates.push(update);\n      }\n    });\n\n    //  send outgoing updates\n    const peerSet = new Set<string | undefined>();\n    context.outgoingUpdates.forEach((update) => peerSet.add(update.peer));\n\n    peerSet.forEach((peer) => {\n      this.outingCom.forEach((comm) => {\n        comm.send(\n          encode({\n            updates: context.outgoingUpdates.filter(\n              (update) => update.peer === peer\n            ),\n          }),\n          peer\n        );\n      });\n    });\n    context.outgoingUpdates.length = 0;\n  }\n\n  private fixPath(path: string, context: Context) {\n    const split = path.split(\"/\");\n    return split\n      .map((part) => translateValue(part, context.properties))\n      .join(\"/\");\n  }\n}\n",
    "import { Update } from \"../../types/Update\";\nimport { getLeafObject } from \"./data-update\";\nimport { Data } from \"../../types/Data\";\nimport { UpdateOptions } from \"./UpdateOptions\";\n\nconst NO_OBJ = {};\n\nexport function getData(\n  root: Data,\n  path: string,\n  properties: { [key: string]: any }\n) {\n  const parts = path.split(\"/\");\n  return getLeafObject(root, parts, 0, false, properties);\n}\n\nexport function setData(\n  now: number,\n  outgoingUpdates: Update[],\n  path: string,\n  value: Data | undefined,\n  options: UpdateOptions = NO_OBJ\n) {\n  const update: Update = { path, value, confirmed: 0 };\n  if (options.peer) update.peer = options.peer;\n  if (options.active) {\n    update.confirmed = now;\n  }\n  outgoingUpdates.push(update);\n}\n",
    "import { Context, getLeafObject } from \"..\";\nimport { ObserverManager } from \"./ObserverManager\";\n\nexport interface IObserver {\n  onChange(\n    callback: (values: any | any[], previous: any | any[]) => void\n  ): IObserver;\n  onElementsAdded(\n    callback: (keys: any | (any[] | undefined)[]) => void\n  ): IObserver;\n  onElementsDeleted(\n    callback: (keys: any | (any[] | undefined)[]) => void\n  ): IObserver;\n  close(): void;\n}\n\nexport class Observer implements IObserver {\n  readonly #partsArrays: (string | number)[][];\n  #previousValues: any[] = [];\n  readonly #changeCallbacks: Set<\n    (values: any | any[], previous: any | any[]) => void\n  > = new Set();\n  readonly #addedElementsCallback: Set<\n    (keys: any | (any[] | undefined)[]) => void\n  > = new Set();\n  readonly #deletedElementsCallback: Set<\n    (keys: any | (any[] | undefined)[]) => void\n  > = new Set();\n  initialized = false;\n\n  constructor(\n    readonly paths: string[],\n    readonly observerManagger: ObserverManager,\n    readonly multiValues: boolean = false\n  ) {\n    this.#partsArrays = paths.map((p) => (p === undefined ? [] : p.split(\"/\")));\n    this.#previousValues = paths.map(() => undefined);\n  }\n\n  onChange(\n    callback: (values: any | any[], previous: any | any[]) => void\n  ): Observer {\n    this.#changeCallbacks.add(callback);\n    return this;\n  }\n\n  onElementsAdded(\n    callback: (keys: any | (any[] | undefined)[]) => void\n  ): Observer {\n    this.#addedElementsCallback.add(callback);\n    return this;\n  }\n\n  onElementsDeleted(\n    callback: (keys: any | (any[] | undefined)[]) => void\n  ): Observer {\n    this.#deletedElementsCallback.add(callback);\n    return this;\n  }\n\n  #valuesChanged(context: Context, updates?: Map<string, any>) {\n    const newValues = this.paths.map((path, index) =>\n      updates?.has(path)\n        ? updates.get(path).value\n        : getLeafObject(\n            context.root,\n            this.#partsArrays[index],\n            0,\n            false,\n            context.properties\n          )\n    );\n\n    if (\n      this.#previousValues.every((prev, index) => {\n        const newValue = newValues[index];\n        if (prev === newValue && typeof newValue !== \"object\") {\n          return true;\n        }\n        if (\n          Array.isArray(prev) &&\n          Array.isArray(newValue) &&\n          prev.length === newValue.length &&\n          prev.every((elem, idx) => elem === newValue[idx])\n        ) {\n          return true;\n        }\n        return false;\n      })\n    ) {\n      return null;\n    }\n\n    return newValues;\n  }\n\n  triggerIfChanged(context: Context, updates: Map<string, any>) {\n    const newValues = !this.paths.length\n      ? undefined\n      : this.#valuesChanged(context, this.initialized ? updates : undefined);\n    if (!newValues) {\n      return;\n    }\n    const previousValues = this.#previousValues;\n    this.#previousValues = newValues;\n\n    this.#changeCallbacks.forEach((callback) =>\n      callback(\n        this.multiValues ? newValues : newValues[0],\n        this.multiValues ? previousValues : previousValues[0]\n      )\n    );\n    if (\n      this.#addedElementsCallback &&\n      newValues.some((val) => Array.isArray(val))\n    ) {\n      let hasNewElements = false;\n      const newElementsArray = newValues.map((val, index) => {\n        if (Array.isArray(val)) {\n          const previousSet = new Set(\n            Array.isArray(previousValues[index]) ? previousValues[index] : []\n          );\n          const newElements = val.filter(\n            (clientId) => !previousSet.has(clientId)\n          );\n          if (newElements.length) {\n            hasNewElements = true;\n          }\n          return newElements;\n        }\n      });\n      if (hasNewElements) {\n        this.#addedElementsCallback.forEach((callback) =>\n          callback(this.multiValues ? newElementsArray : newElementsArray[0])\n        );\n      }\n    }\n\n    if (\n      this.#deletedElementsCallback &&\n      previousValues.some((val) => Array.isArray(val))\n    ) {\n      let hasDeletedElements = false;\n      const deletedElementsArray = previousValues.map((prev, index) => {\n        if (Array.isArray(prev)) {\n          const currentSet = new Set(\n            Array.isArray(newValues[index]) ? newValues[index] : []\n          );\n          const deletedElements = prev.filter(\n            (clientId) => !currentSet.has(clientId)\n          );\n          if (deletedElements.length) {\n            hasDeletedElements = true;\n          }\n          return deletedElements;\n        }\n      });\n      if (hasDeletedElements) {\n        this.#deletedElementsCallback.forEach((callback) =>\n          callback(\n            this.multiValues ? deletedElementsArray : deletedElementsArray[0]\n          )\n        );\n      }\n    }\n    this.initialized = true;\n  }\n\n  close(): void {\n    this.observerManagger.removeObserver(this);\n  }\n}\n",
    "import { Context } from \"@/context/Context\";\nimport { Observer } from \"./Observer\";\nimport { UpdatePath } from \"@/cycles/data-update/data-update\";\n\nexport class ObserverManager {\n  private readonly observers = new Map<string, Set<Observer>>();\n\n  private ensurePath(path: string): Set<Observer> {\n    const obsSet = this.observers.get(path);\n    if (obsSet) {\n      return obsSet;\n    }\n    const observerSet = new Set<Observer>();\n    this.observers.set(path, observerSet);\n    return observerSet;\n  }\n\n  observe(paths: string[], multi: boolean): Observer {\n    const observer = new Observer(paths, this, multi);\n    paths.forEach((path) => {\n      const obsSet = this.ensurePath(path);\n      obsSet.add(observer);\n    });\n    return observer;\n  }\n\n  readonly #tempObsTriggered = new Set<Observer>();\n  triggerObservers(context: Context, updates: Map<string, UpdatePath>) {\n    updates.keys().forEach((path) => {\n      this.observers\n        .get(path)\n        ?.forEach((observer) => this.#tempObsTriggered.add(observer));\n    });\n    this.#tempObsTriggered.forEach((o) => o.triggerIfChanged(context, updates));\n    this.#tempObsTriggered.clear();\n  }\n\n  removeObserver(observer: Observer) {\n    observer.paths.forEach((path) => {\n      const obsSet = this.observers.get(path);\n      obsSet?.delete(observer);\n      if (!obsSet?.size) {\n        this.observers.delete(path);\n      }\n    });\n  }\n\n  close() {\n    this.observers.forEach((obsSet) => obsSet.forEach((o) => o.close()));\n    this.observers.clear();\n  }\n}\n",
    "import { CommInterface } from \"@/clients/CommInterface\";\nimport { Context } from \"@/context/Context\";\nimport { Processor } from \"../core/Processor\";\nimport { setData } from \"@/cycles/data-update/data-manager\";\nimport { Data } from \"@/types/Data\";\n\nexport function deepShareData(\n  context: Context,\n  obj: Data,\n  peerProps: { active: true; peer: string },\n  pathParts: string[] = [],\n  now: number = Date.now()\n) {\n  const shouldGoDeeper =\n    typeof obj === \"object\" &&\n    obj &&\n    !(obj instanceof ArrayBuffer) &&\n    Object.values(obj).length;\n  if (shouldGoDeeper) {\n    for (let key in obj) {\n      const value = Array.isArray(obj) ? obj[Number(key)] : obj[key];\n      deepShareData(context, value, peerProps, [...pathParts, key], now);\n    }\n  } else {\n    setData(now, context.outgoingUpdates, pathParts.join(\"/\"), obj, peerProps);\n  }\n}\n\nexport function hookCommInterface(\n  context: Context,\n  comm: CommInterface,\n  processor: Processor\n) {\n  const removeOnMessage = comm.onMessage((buffer) => {\n    processor.receivedData(buffer, context);\n    context.onReceivedIncomingUpdates?.();\n  });\n  const removeOnNewClient = comm.onNewClient((peer) => {\n    deepShareData(context, context.root, { active: true, peer });\n  });\n  const disconnectComm = processor.connectComm(comm);\n  return {\n    disconnect: () => {\n      removeOnMessage();\n      removeOnNewClient();\n      disconnectComm();\n    },\n  };\n}\n",
    "import { CommInterface } from \"@/clients/CommInterface\";\nimport { hookCommInterface } from \"@/clients/CommInterfaceHook\";\nimport { Context } from \"@/context/Context\";\nimport { Processor } from \"@/core/Processor\";\nimport { UpdatePath } from \"@/cycles/data-update/data-update\";\n\nexport class CommAux {\n  private readonly processor = new Processor();\n  readonly disconnect: () => void;\n\n  constructor(\n    private readonly comm: CommInterface,\n    private readonly context: Context\n  ) {\n    const { disconnect } = hookCommInterface(\n      context,\n      this.comm,\n      this.processor\n    );\n    this.disconnect = disconnect;\n  }\n\n  private readonly _updates = new Map<string, UpdatePath>();\n  performCycle(): Map<string, UpdatePath> | void {\n    this._updates.clear();\n    this.processor.performCycle(this.context, this._updates);\n    if (this._updates.size) {\n      return this._updates;\n    }\n  }\n}\n",
    "import { Context } from \"@/context/Context\";\nimport { Update } from \"@/types/Update\";\nimport { CommInterface } from \"@/clients/CommInterface\";\nimport { getData, setData } from \"@/cycles/data-update/data-manager\";\nimport { Data } from \"@/types/Data\";\nimport { ObserverManager } from \"@/observer/ObserverManager\";\nimport { IObserver, Observer } from \"@/observer/Observer\";\nimport { CommAux } from \"@/attachments/comm/CommAux\";\n\ninterface Props<T extends Data> {\n  appId: string;\n  userId: string;\n  root?: Record<string, T>;\n  properties?: Record<string, any>;\n  onDataCycle?: () => void;\n  comm: CommInterface;\n  onReceivedIncomingUpdates?: () => void;\n}\n\nexport interface IProgram {\n  performCycle(): void;\n  observe(paths?: string[] | string): IObserver;\n  setData(path: string, value: Data | undefined): void;\n  close(): void;\n}\n\nexport class Program<T extends Data = Data> implements IProgram, Context {\n  readonly appId: string;\n  readonly userId: string;\n  readonly root: Record<string, T>;\n  readonly incomingUpdates: Update[] = [];\n  readonly outgoingUpdates: Update[] = [];\n  readonly properties: Record<string, any>;\n  private readonly commAux: CommAux;\n  private readonly observerManager = new ObserverManager();\n  private onDataCycle?(): void;\n  onReceivedIncomingUpdates?(): void;\n\n  constructor({\n    appId,\n    userId,\n    root,\n    properties,\n    onDataCycle,\n    comm,\n    onReceivedIncomingUpdates,\n  }: Props<T>) {\n    this.appId = appId;\n    this.userId = userId;\n    this.root = root ?? {};\n    this.properties = properties ?? {};\n    this.properties.self = userId;\n    this.onDataCycle = onDataCycle;\n    this.commAux = new CommAux(comm, this);\n    this.onReceivedIncomingUpdates = onReceivedIncomingUpdates;\n  }\n\n  performCycle() {\n    const updates = this.commAux.performCycle();\n    if (updates) {\n      this.observerManager.triggerObservers(this, updates);\n      this.onDataCycle?.();\n    }\n  }\n\n  observe(paths?: string[] | string): IObserver {\n    const multi = Array.isArray(paths);\n    const pathArray = paths === undefined ? [] : multi ? paths : [paths];\n    return this.observerManager.observe(pathArray, multi);\n  }\n\n  private static readonly ACTIVE = { active: true };\n  setData(path: string, value: Data | undefined) {\n    setData(Date.now(), this.outgoingUpdates, path, value, Program.ACTIVE);\n  }\n\n  getData(path: string) {\n    return getData(this.root, path, this.properties);\n  }\n\n  close() {\n    this.commAux.disconnect();\n  }\n}\n",
    "export interface IDataWriter {\n  at(offset: number): IDataWriter;\n  writeByte(byte: number): void;\n  writeBooleans(...bools: boolean[]): void;\n  writeBytes(bytes: Uint8Array): void; // writes [u8 len][len bytes]\n  writeString(str: string): void; // writes as writeBytes(utf8)\n  writeInt16(v: number): void;\n  writeInt32(v: number): void;\n  writeFloat64(num: number): void; // IEEE754, little-endian\n  readonly offset: number;\n}\n\nexport class DataRingWriter implements IDataWriter {\n  offset = 0;\n\n  private cap: number;\n  private enc = new TextEncoder();\n\n  // scratch buffers (non-shared ok even if underlying ring is shared)\n  private scratch = new Uint8Array(64);\n  private floatScratch = new Uint8Array(8);\n  private floatDV = new DataView(this.floatScratch.buffer);\n  private intScratch = new Uint8Array(4);\n  private intDV = new DataView(this.intScratch.buffer);\n\n  constructor(private data: Uint8Array) {\n    this.cap = data.length;\n    if (this.cap <= 0) throw new Error(\"DataRing: data length must be > 0\");\n  }\n\n  at(offset: number) {\n    // normalize in [0, cap)\n    this.offset = ((offset % this.cap) + this.cap) % this.cap;\n    return this;\n  }\n\n  // ---- core ring copy helpers ----\n\n  private advance(n: number) {\n    const x = this.offset + n;\n    this.offset = x >= this.cap ? x % this.cap : x;\n  }\n\n  private writeU8(v: number) {\n    this.data[this.offset] = v & 0xff;\n    this.advance(1);\n  }\n\n  /** write src bytes to ring, handling wrap */\n  private writeRawBytes(src: Uint8Array) {\n    const n = src.length;\n    if (n === 0) return;\n\n    const end = this.offset + n;\n    if (end <= this.cap) {\n      this.data.set(src, this.offset);\n      this.offset = end === this.cap ? 0 : end;\n      return;\n    }\n\n    const first = this.cap - this.offset;\n    this.data.set(src.subarray(0, first), this.offset);\n    const second = n - first;\n    this.data.set(src.subarray(first), 0);\n    this.offset = second; // wrapped\n  }\n\n  // ---- public API ----\n\n  writeByte(byte: number) {\n    this.writeU8(byte);\n  }\n\n  writeBooleans(...bools: boolean[]): void {\n    let bits = 0;\n    for (let i = 0; i < bools.length; i++) {\n      const index = i % 8;\n      if (i && index === 0) {\n        this.writeByte(bits);\n        bits = 0;\n      }\n      bits |= bools[i] ? 1 << index : 0;\n    }\n    this.writeByte(bits);\n  }\n\n  /** Writes [u8 len][len bytes]. len must be <= 255. */\n  writeBytes(bytes: Uint8Array) {\n    if (bytes.length > 255) {\n      throw new Error(\n        `writeBytes: length ${bytes.length} > 255 (u8 length prefix)`\n      );\n    }\n    this.writeU8(bytes.length);\n    this.writeRawBytes(bytes);\n  }\n\n  writeString(str: string) {\n    // Ensure scratch big enough for worst-case UTF-8 length.\n    // (UTF-8 max is 4 bytes per code point; using 4*str.length is a safe upper bound in JS.)\n    const needed = Math.min(255, str.length * 4); // because we store len as u8 anyway\n    if (this.scratch.length < needed) {\n      this.scratch = new Uint8Array(Math.max(needed, this.scratch.length * 2));\n    }\n\n    const { written, read } = this.enc.encodeInto(str, this.scratch);\n\n    // If not all chars fit (read < str.length) OR written > 255, you need a different length prefix.\n    if (read < str.length || written > 255) {\n      // simplest: fall back to encode() which allocates, or upgrade to u16 length prefix\n      const bytes = this.enc.encode(str);\n      if (bytes.length > 255)\n        throw new Error(`writeString: encoded length ${bytes.length} > 255`);\n      this.writeBytes(bytes);\n      return;\n    }\n\n    this.writeBytes(this.scratch.subarray(0, written));\n  }\n\n  private clampInt16(v: number) {\n    if (v > 32767) return 32767;\n    if (v < -32768) return -32768;\n    return v | 0;\n  }\n\n  writeInt16(v: number) {\n    this.floatDV.setInt16(0, this.clampInt16(v), true);\n    this.writeRawBytes(this.floatScratch.subarray(0, 2));\n  }\n\n  writeInt32(v: number) {\n    this.floatDV.setInt32(0, v | 0, true);\n    this.writeRawBytes(this.floatScratch.subarray(0, 4));\n  }\n\n  writeFloat64(num: number) {\n    // write into temp 8-byte buffer (little-endian) then ring-copy\n    this.floatDV.setFloat64(0, num, true);\n    this.writeRawBytes(this.floatScratch);\n  }\n}\n\nexport interface IDataReader {\n  at(offset: number): IDataReader;\n  readByte(): number;\n  readBooleans(count: number): boolean[];\n  readBytes(): Uint8Array; // reads [u8 len][len bytes] and returns payload (view or scratch)\n  readString(): string; // reads bytes then decodes UTF-8\n  readInt16(): number;\n  readInt32(): number;\n  readFloat64(): number; // IEEE754, little-endian\n  readonly offset: number;\n}\n\nexport class DataRingReader implements IDataReader {\n  offset = 0;\n\n  private cap: number;\n  private dec = new TextDecoder();\n\n  // scratch for wrapped reads (reused)\n  private scratch = new Uint8Array(64);\n  private readonly floatScratch = new Uint8Array(8);\n  private readonly floatDV = new DataView(this.floatScratch.buffer);\n  private readonly boolScratch: boolean[] = [];\n\n  constructor(private data: Uint8Array) {\n    this.cap = data.length;\n    if (this.cap <= 0) throw new Error(\"DataRing: data length must be > 0\");\n  }\n\n  at(offset: number) {\n    this.offset = ((offset % this.cap) + this.cap) % this.cap;\n    return this;\n  }\n\n  // ---- core ring helpers ----\n\n  private advance(n: number) {\n    const x = this.offset + n;\n    this.offset = x >= this.cap ? x % this.cap : x;\n  }\n\n  private readU8(): number {\n    const v = this.data[this.offset];\n    this.advance(1);\n    return v;\n  }\n\n  /** Reads n bytes; returns a view if contiguous, otherwise copies into scratch and returns scratch.subarray(0,n). */\n  private readRawBytes(n: number): Uint8Array {\n    if (n <= 0) return this.data.subarray(0, 0);\n\n    const end = this.offset + n;\n    if (end <= this.cap) {\n      const view = this.data.subarray(this.offset, end);\n      this.offset = end === this.cap ? 0 : end;\n      return view;\n    }\n\n    // wrapped: copy tail + head into scratch\n    if (this.scratch.length < n) {\n      this.scratch = new Uint8Array(Math.max(n, this.scratch.length * 2));\n    }\n\n    const first = this.cap - this.offset;\n    this.scratch.set(this.data.subarray(this.offset, this.cap), 0);\n    const second = n - first;\n    this.scratch.set(this.data.subarray(0, second), first);\n    this.offset = second;\n\n    return this.scratch.subarray(0, n);\n  }\n\n  // ---- public API ----\n\n  readByte(): number {\n    return this.readU8();\n  }\n\n  readBytes(): Uint8Array {\n    const len = this.readU8(); // u8 length prefix\n    return this.readRawBytes(len); // payload\n  }\n\n  readString(): string {\n    const bytes = this.readBytes();\n\n    // If underlying buffer is SharedArrayBuffer, TextDecoder.decode refuses shared views.\n    // If we got a contiguous view into shared memory, copy it. If we got scratch, it's already non-shared.\n    const needsCopy = bytes.buffer instanceof SharedArrayBuffer;\n\n    if (needsCopy) {\n      // copy to non-shared and decode\n      if (this.scratch.length < bytes.length) {\n        this.scratch = new Uint8Array(\n          Math.max(bytes.length, this.scratch.length * 2)\n        );\n      }\n      this.scratch.set(bytes, 0);\n      return this.dec.decode(this.scratch.subarray(0, bytes.length));\n    }\n\n    return this.dec.decode(bytes);\n  }\n\n  readInt16(): number {\n    const b = this.readRawBytes(2);\n    if (b.byteLength !== 2) throw new Error(\"readInt16: expected 2 bytes\");\n\n    // Copy into floatScratch so DataView reads a stable non-shared buffer\n    this.floatScratch[0] = b[0];\n    this.floatScratch[1] = b[1];\n\n    return this.floatDV.getInt16(0, true);\n  }\n\n  readInt32(): number {\n    const b = this.readRawBytes(4);\n    if (b.byteLength !== 4) throw new Error(\"readInt32: expected 4 bytes\");\n\n    this.floatScratch.set(b.subarray(0, 4), 0);\n    return this.floatDV.getInt32(0, true);\n  }\n\n  readFloat64(): number {\n    // Read 8 bytes into temp (handles wrap), then interpret little-endian float64\n    const b = this.readRawBytes(8);\n    if (b.byteLength !== 8) throw new Error(\"readFloat64: expected 8 bytes\");\n\n    // If b is a view into the ring, it may be shared or not contiguous elsewhere later; copy into floatScratch.\n    // If b is scratch already, this copy is still cheap and keeps floatDV simple.\n    this.floatScratch.set(b);\n    return this.floatDV.getFloat64(0, true);\n  }\n\n  readBooleans(count: number): boolean[] {\n    const bools: boolean[] = this.boolScratch;\n    bools.length = 0;\n    let bits = 0;\n    do {\n      const index = bools.length % 8;\n      if (index === 0) {\n        bits = this.readByte();\n      }\n      bools.push((bits & (1 << index)) !== 0);\n    } while (bools.length < count);\n    return bools;\n  }\n}\n",
    "import { READ, WRITE } from \"../core/messenger\";\n\nexport function processLoop(\n  ctrl: Int32Array,\n  callback: () => void,\n): () => void {\n  let lastWrite = Atomics.load(ctrl, WRITE);\n\n  async function tick() {\n    // sleep until WRITE changes\n    const result = Atomics.waitAsync(ctrl, WRITE, lastWrite, 16);\n    await result.value;\n    const writeNow = Atomics.load(ctrl, WRITE);\n    if (writeNow === lastWrite) return;\n    lastWrite = writeNow;\n\n    callback();\n  }\n  let looping = true;\n  async function start() {\n    while (looping) {\n      await tick();\n    }\n  }\n  start();\n  return () => {\n    looping = false;\n  };\n}\n",
    "export enum MessageType {\n  //  ToWorker\n  KEY_DOWN,\n  KEY_UP,\n  ON_USER_UPDATE,\n  ON_MESSAGE,\n  MOUSE_MOVE,\n  MOUSE_DOWN,\n  MOUSE_UP,\n  WHEEL,\n  POINTER_LOCK,\n  //  Both\n  PING,\n  //  FromWorker\n  LINE,\n}\n\nexport type UserMessage = {\n  type: MessageType.ON_USER_UPDATE;\n  user: string;\n  action: \"join\" | \"leave\";\n  users: string[];\n};\nexport type MsgMessage = {\n  type: MessageType.ON_MESSAGE;\n  data: Uint8Array;\n  from?: string;\n};\nexport type KeyMessage = {\n  type: MessageType.KEY_DOWN | MessageType.KEY_UP;\n} & Pick<\n  KeyboardEvent,\n  \"key\" | \"ctrlKey\" | \"altKey\" | \"metaKey\" | \"shiftKey\" | \"repeat\"\n>;\nexport type PingMessage = {\n  type: MessageType.PING;\n  now: number;\n};\nexport type MouseMessage = {\n  type: MessageType.MOUSE_MOVE | MessageType.MOUSE_DOWN | MessageType.MOUSE_UP;\n} & Pick<\n  MouseEvent,\n  | \"movementX\"\n  | \"movementY\"\n  | \"button\"\n  | \"buttons\"\n  | \"altKey\"\n  | \"ctrlKey\"\n  | \"shiftKey\"\n  | \"metaKey\"\n  | \"clientX\"\n  | \"clientY\"\n>;\nexport type WheelMessage = { type: MessageType.WHEEL } & Pick<\n  WheelEvent,\n  | \"deltaX\"\n  | \"deltaY\"\n  | \"deltaZ\"\n  | \"deltaMode\"\n  | \"altKey\"\n  | \"ctrlKey\"\n  | \"metaKey\"\n  | \"shiftKey\"\n>;\nexport type PointerMessage = { type: MessageType.POINTER_LOCK; enter: boolean };\n\nexport type LineMessage = {\n  type: MessageType.LINE;\n  from: { x: number; y: number };\n  to: { x: number; y: number };\n  color: string;\n  lineWidth: number;\n};\n\n// All messages\nexport type Message =\n  | KeyMessage\n  | PingMessage\n  | UserMessage\n  | MsgMessage\n  | MouseMessage\n  | WheelMessage\n  | PointerMessage\n  | LineMessage;\n",
    "import {\n  LineMessage,\n  MouseMessage,\n  PointerMessage,\n  UserMessage,\n  WheelMessage,\n} from \"../MessageType\";\nimport { KeyMessage } from \"../MessageType\";\nimport { MessageType } from \"../MessageType\";\nimport { Message } from \"../MessageType\";\nimport { PingMessage } from \"../MessageType\";\nimport { IDataReader, IDataWriter } from \"./data-ring\";\n\nexport function hookSerializers() {\n  const keySerializer: Serializer<KeyMessage> = {\n    serialize: (_type, msg: KeyMessage, data: IDataWriter) => {\n      data.writeString(msg.key);\n      data.writeBooleans(\n        msg.altKey,\n        msg.ctrlKey,\n        msg.metaKey,\n        msg.shiftKey,\n        msg.repeat,\n      );\n    },\n    deserialize: (\n      data: IDataReader,\n      type: MessageType.KEY_UP | MessageType.KEY_DOWN,\n    ) => {\n      const key = data.readString();\n      const [altKey, ctrlKey, metaKey, shiftKey, repeat] = data.readBooleans(5);\n      return {\n        type,\n        key,\n        altKey,\n        ctrlKey,\n        metaKey,\n        shiftKey,\n        repeat,\n      };\n    },\n  };\n\n  const mouseSerializer: Serializer<MouseMessage> = {\n    serialize(type, msg, data) {\n      data.writeInt16(msg.movementX);\n      data.writeInt16(msg.movementY);\n      data.writeBooleans(msg.altKey, msg.ctrlKey, msg.metaKey, msg.shiftKey);\n      data.writeByte(msg.buttons);\n      data.writeInt16(msg.clientX);\n      data.writeInt16(msg.clientY);\n      if (type !== MessageType.MOUSE_MOVE) {\n        data.writeByte(msg.button);\n      }\n    },\n    deserialize(data, type) {\n      const movementX = data.readInt16();\n      const movementY = data.readInt16();\n      const [altKey, ctrlKey, metaKey, shiftKey] = data.readBooleans(4);\n\n      const buttons = data.readByte();\n      const clientX = data.readInt16();\n      const clientY = data.readInt16();\n      const button = type !== MessageType.MOUSE_MOVE ? data.readByte() : -1;\n      return {\n        type,\n        movementX,\n        movementY,\n        clientX,\n        clientY,\n        button,\n        buttons,\n        altKey,\n        ctrlKey,\n        metaKey,\n        shiftKey,\n      };\n    },\n  };\n\n  type Pair<M extends Message = Message> = [M[\"type\"], Serializer<M>];\n  const serializers: Pair[] = [\n    [MessageType.KEY_DOWN, keySerializer],\n    [MessageType.KEY_UP, keySerializer],\n    [\n      MessageType.PING,\n      {\n        serialize(_type, msg: PingMessage, data: IDataWriter) {\n          data.writeFloat64(msg.now);\n        },\n        deserialize(data: IDataReader) {\n          const now = data.readFloat64();\n          return { type: MessageType.PING, now };\n        },\n      },\n    ],\n    [\n      MessageType.ON_USER_UPDATE,\n      {\n        serialize(_type, msg: UserMessage, data: IDataWriter) {\n          data.writeString(msg.user);\n          data.writeByte(msg.action === \"join\" ? 1 : 0);\n          for (const user of msg.users) {\n            data.writeString(user);\n          }\n          data.writeString(\"\");\n        },\n        deserialize(data) {\n          const user = data.readString();\n          const action = data.readByte() === 1 ? \"join\" : \"leave\";\n          const users: string[] = [];\n          do {\n            const usr = data.readString();\n            users.push(usr);\n          } while (users[users.length - 1].length);\n          users.pop();\n          return {\n            type: MessageType.ON_USER_UPDATE,\n            user,\n            action,\n            users,\n          };\n        },\n      },\n    ],\n    [MessageType.MOUSE_DOWN, mouseSerializer],\n    [MessageType.MOUSE_UP, mouseSerializer],\n    [MessageType.MOUSE_MOVE, mouseSerializer],\n    [\n      MessageType.WHEEL,\n      {\n        serialize(_type, msg: WheelMessage, data) {\n          data.writeInt16(msg.deltaX * 256);\n          data.writeInt16(msg.deltaY * 256);\n          data.writeInt16(msg.deltaZ * 256);\n          data.writeByte(msg.deltaMode);\n          data.writeBooleans(\n            msg.altKey,\n            msg.ctrlKey,\n            msg.metaKey,\n            msg.shiftKey,\n          );\n        },\n        deserialize(data, type: WheelMessage[\"type\"]) {\n          const deltaX = data.readInt16() / 256;\n          const deltaY = data.readInt16() / 256;\n          const deltaZ = data.readInt16() / 256;\n          const deltaMode = data.readByte();\n          const [altKey, ctrlKey, metaKey, shiftKey] = data.readBooleans(4);\n          return {\n            type,\n            deltaX,\n            deltaY,\n            deltaZ,\n            deltaMode,\n            altKey,\n            ctrlKey,\n            metaKey,\n            shiftKey,\n          };\n        },\n      },\n    ],\n    [\n      MessageType.POINTER_LOCK,\n      {\n        serialize(_type, msg: PointerMessage, data) {\n          data.writeBooleans(msg.enter);\n        },\n        deserialize(data, type: PointerMessage[\"type\"]) {\n          const [enter] = data.readBooleans(1);\n          return { type, enter };\n        },\n      },\n    ],\n    [\n      MessageType.LINE,\n      {\n        serialize(_type, msg: LineMessage, data) {\n          data.writeInt16(msg.from.x);\n          data.writeInt16(msg.from.y);\n          data.writeInt16(msg.to.x);\n          data.writeInt16(msg.to.y);\n          data.writeString(msg.color);\n          data.writeByte(msg.lineWidth);\n        },\n        deserialize(data, type: LineMessage[\"type\"]) {\n          const from = {\n            x: data.readInt16(),\n            y: data.readInt16(),\n          };\n          const to = {\n            x: data.readInt16(),\n            y: data.readInt16(),\n          };\n          const color = data.readString();\n          const lineWidth = data.readByte();\n          return {\n            type,\n            from,\n            to,\n            color,\n            lineWidth,\n          };\n        },\n      },\n    ],\n  ];\n\n  const serializerMap = new Map<MessageType, Serializer<Message>>(serializers);\n\n  function serialize<M extends Message>(\n    type: M[\"type\"],\n    message: Omit<M, \"type\">,\n    data: IDataWriter,\n  ) {\n    const serializer = serializerMap.get(type) as Serializer<M> | undefined;\n    if (!serializer) {\n      return 0;\n    }\n    data.writeByte(type);\n    serializer.serialize(type, message, data);\n  }\n\n  function deserialize(data: IDataReader): Message | undefined {\n    const type = data.readByte();\n    return serializerMap.get(type)?.deserialize(data, type);\n  }\n\n  return {\n    serialize,\n    deserialize,\n  };\n}\nexport interface Serializer<M extends Message> {\n  serialize(type: M[\"type\"], msg: Omit<M, \"type\">, data: IDataWriter): void;\n  deserialize(data: IDataReader, type: M[\"type\"]): M;\n}\n",
    "import { READ, WRITE } from \"../core/messenger\";\nimport { Message } from \"../MessageType\";\nimport { IDataReader } from \"./data-ring\";\nimport { processLoop } from \"./loop\";\nimport { hookSerializers } from \"./serializers\";\n\nexport function hookMsgListener() {\n  const { deserialize } = hookSerializers();\n\n  function listen(\n    ctrl: Int32Array,\n    data: IDataReader,\n    onMessage: (msg: Message) => void,\n  ) {\n    const stop = processLoop(ctrl, () => {\n      // drain whatever is available\n      const msg = drain(ctrl, data);\n      if (msg) {\n        onMessage(msg);\n      }\n    });\n    return () => {\n      stop();\n    };\n  }\n\n  function drain(ctrl: Int32Array, data: IDataReader) {\n    const r = Atomics.load(ctrl, READ);\n    const w = Atomics.load(ctrl, WRITE);\n    if (r === w) {\n      return;\n    }\n\n    const msg = deserialize(data);\n    if (r !== data.offset) {\n      Atomics.store(ctrl, READ, data.offset);\n    }\n    return msg;\n  }\n\n  return { listen };\n}\n",
    "import { Message } from \"../MessageType\";\nimport {\n  DataRingReader,\n  DataRingWriter,\n  IDataWriter,\n} from \"../utils/data-ring\";\nimport { hookMsgListener } from \"../utils/listener\";\nimport { hookSerializers } from \"../utils/serializers\";\n\nexport const WRITE = 0;\nexport const READ = 1;\n\nexport function hookMessenger(ctrl: Int32Array, data: IDataWriter) {\n  const { serialize } = hookSerializers();\n\n  function sendMessage<M extends Message>(\n    type: M[\"type\"],\n    msg: Omit<M, \"type\">,\n  ) {\n    const w0 = Atomics.load(ctrl, WRITE);\n    serialize(type, msg, data);\n    if (w0 !== data.offset) {\n      Atomics.store(ctrl, WRITE, data.offset);\n      Atomics.notify(ctrl, WRITE);\n    }\n  }\n\n  return {\n    sendMessage,\n  };\n}\n\nexport function setupMessenger(\n  worker: Worker,\n  onMessage: (msg: Message) => void,\n) {\n  const BYTES = 1024 * 1024;\n  const sabToWorker = new SharedArrayBuffer(BYTES);\n  const sabFromWorker = new SharedArrayBuffer(BYTES);\n\n  const { listen } = hookMsgListener();\n\n  worker.postMessage({ sabToWorker, sabFromWorker }); //  not transferable\n\n  const unlisten = listen(\n    new Int32Array(sabFromWorker, 0, 8),\n    new DataRingReader(new Uint8Array(sabFromWorker, 32)),\n    onMessage,\n  );\n\n  const { sendMessage } = hookMessenger(\n    new Int32Array(sabToWorker, 0, 8),\n    new DataRingWriter(new Uint8Array(sabToWorker, 32)),\n  );\n  return {\n    sendMessage,\n    close: () => {\n      unlisten();\n    },\n  };\n}\n",
    "/// <reference lib=\"webworker\" />\n\nimport { WorkerCommand } from \"./WorkerCommand\";\nimport { hookSerializers } from \"@/app/utils/serializers\";\nimport { hookMessenger } from \"@/app/core/messenger\";\nimport { DataRingReader, DataRingWriter } from \"@/app/utils/data-ring\";\nimport { Message, MessageType } from \"@/app/MessageType\";\nimport { hookMsgListener } from \"@/app/utils/listener\";\n\n// function respond(response: WorkerResponse) {\n//   (self as DedicatedWorkerGlobalScope).postMessage(\n//     response,\n//     response.data ? [response.data] : []\n//   );\n// }\n\nexport function initialize(): void {\n  // let program: IProgram | undefined;\n  // const messageListeners = new Array<(data: Uint8Array) => void>();\n  // const newUserListener = new Array<(user: string) => void>();\n  let sendMessage: <M extends Message>(\n    type: M[\"type\"],\n    msg: Omit<M, \"type\">,\n  ) => void;\n\n  let canvas: OffscreenCanvas | undefined;\n  let cursor = {\n    x: 0,\n    y: 0,\n    needsReset: true,\n  };\n\n  function generateRandomHexColor() {\n    // Generate a random number between 0 and 0xFFFFFF\n    let randomNum = Math.floor(Math.random() * 0xffffff);\n\n    // Convert the number to a hexadecimal string\n    let hexColor = randomNum.toString(16);\n\n    // Pad the string with leading zeros if necessary to ensure it is 6 digits long\n    let fullHexColor = hexColor.padStart(6, \"0\");\n\n    return `#${fullHexColor.toUpperCase()}`; // Prepend '#' and convert to uppercase\n  }\n\n  const { listen } = hookMsgListener();\n\n  // class CommInterfaceWorker implements CommInterface {\n  //   constructor() {}\n  //   send(data: Uint8Array, peer?: string): void {\n  //     respond({ action: \"send\", data, peer });\n  //   }\n  //   close(): void {\n  //     respond({ action: \"close\" });\n  //   }\n  //   onMessage(listener: (data: Uint8Array) => void): () => void {\n  //     messageListeners.push(listener);\n  //     return () => {\n  //       messageListeners.splice(messageListeners.indexOf(listener), 1);\n  //     };\n  //   }\n  //   onNewClient(listener: (peer: string) => void): () => void {\n  //     newUserListener.push(listener);\n  //     return () => {\n  //       newUserListener.splice(newUserListener.indexOf(listener), 1);\n  //     };\n  //   }\n  // }\n\n  self.addEventListener(\n    \"message\",\n    (\n      e: MessageEvent<\n        WorkerCommand & {\n          sabToWorker?: SharedArrayBuffer;\n          sabFromWorker?: SharedArrayBuffer;\n          canvas?: OffscreenCanvas;\n          width?: number;\n          height?: number;\n          dpr?: number;\n        }\n      >,\n    ) => {\n      const msg = e.data;\n      if (msg.sabToWorker) {\n        const sab = msg.sabToWorker;\n        const ctrl = new Int32Array(sab, 0, 8);\n        const data = new DataRingReader(new Uint8Array(sab, 32));\n        listen(ctrl, data, (msg) => {\n          console.log({\n            ...msg,\n            type: MessageType[msg.type],\n          });\n          if (msg.type === MessageType.POINTER_LOCK) {\n            cursor.needsReset = true;\n          }\n          if (msg.type === MessageType.MOUSE_MOVE) {\n            if (cursor.needsReset) {\n              cursor.x = msg.clientX * 2;\n              cursor.y = msg.clientY * 2;\n              cursor.needsReset = false;\n            }\n            const ctx = canvas?.getContext(\"2d\");\n\n            if (ctx) {\n              ctx.lineWidth = 10;\n              ctx.beginPath();\n              ctx.moveTo(cursor.x, cursor.y);\n              const from = { x: cursor.x, y: cursor.y };\n              cursor.x += msg.movementX;\n              cursor.y += msg.movementY;\n              cursor.x = Math.max(0, Math.min(ctx.canvas.width, cursor.x));\n              cursor.y = Math.max(0, Math.min(ctx.canvas.height, cursor.y));\n              ctx.strokeStyle = generateRandomHexColor();\n              ctx.lineTo(cursor.x, cursor.y);\n              ctx.stroke();\n              sendMessage(MessageType.LINE, {\n                from,\n                to: { x: cursor.x, y: cursor.y },\n                color: ctx.strokeStyle,\n                lineWidth: ctx.lineWidth,\n              });\n            }\n          }\n          if (msg.type === MessageType.PING) {\n            sendMessage(MessageType.PING, { now: msg.now });\n          }\n        });\n      }\n      if (msg.sabFromWorker) {\n        const sab = msg.sabFromWorker;\n        const ctrl = new Int32Array(sab, 0, 8);\n        const data = new DataRingWriter(new Uint8Array(sab, 32));\n        const result = hookMessenger(ctrl, data);\n        sendMessage = result.sendMessage;\n      }\n      if (msg.canvas) {\n        canvas = msg.canvas;\n        const { width, height, dpr } = msg;\n        if (width && height) {\n          canvas.width = width * (dpr ?? 1);\n          canvas.height = height * (dpr ?? 1);\n        }\n      }\n      if (msg.type === \"resize\") {\n        if (canvas) {\n          const dpr = msg.dpr ?? 1;\n          canvas.width = msg.width * dpr;\n          canvas.height = msg.height * dpr;\n          return;\n        }\n      }\n\n      // if (msg.type === \"createApp\") {\n      //   if (program) {\n      //     throw new Error(\"Can only create program once\");\n      //   }\n      //   program = new Program({\n      //     appId: msg.appId,\n      //     userId: msg.userId,\n      //     comm: new CommInterfaceWorker(),\n      //   });\n      //   console.log(program);\n      // }\n      //  else if (msg.type === \"onMessage\") {\n      //   messageListeners.forEach((listener) => listener(msg.data));\n      // } else if (msg.type === \"onUserUpdate\") {\n      //   if (msg.action === \"join\") {\n      //     newUserListener.forEach((listener) => listener(msg.user));\n      //   } else if (msg.action === \"leave\") {\n      //     program?.setData(`users/${msg.user}`, undefined);\n      //   }\n      // } else if (msg.type === \"ping\") {\n      //   respond({ action: \"ping\", now: msg.now });\n      // }\n    },\n  );\n}\n",
    "import { initialize } from \"napl\";\n\ninitialize();\n"
  ],
  "mappings": "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",
  "debugId": "81E7142983261FB664756E2164756E21",
  "names": []
}